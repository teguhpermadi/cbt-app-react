import{c as T,j as t,r as F}from"./app-BL23_ioL.js";import{c as ce,d as de,a as me,b as ue,S as fe}from"./select-1dTW8A67.js";import{C as Q,a as Z,b as he,c as pe}from"./card-BPYLlYs-.js";import{T as se}from"./textarea-L_TQdpuK.js";import{c as xe,B as L,a as le}from"./button-ErPUhfKM.js";import{L as P}from"./label-CDDyI8HS.js";import{I as z}from"./input-CZPc4iR6.js";import{C as ge}from"./checkbox-BB3F9eKw.js";import{X as A}from"./x-Bvzm8Mbo.js";import{T as re}from"./trash-2-BZUYrCA3.js";import{P as X}from"./plus-BCgrxRhX.js";import{S as be}from"./square-check-big-CfvcNerE.js";import{R as _e,u as je,a as ye,M as Ne,b as ve,i as ke,B as we,C as Ce,c as Oe,H as ie,P as ne}from"./style-CnmbGnv_.js";import{R as te,M as Se}from"./RichTextEditor-BBqXt6Vd.js";import{a as $e,b as ae,s as Ee,d as Re,S as Me,v as Ie,D as Fe,c as Pe,K as Le,P as Te,u as De,C as Ge}from"./sortable.esm-DG6MMUaM.js";import{G as Ue}from"./grip-vertical-CIej0FFK.js";const ze=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],H=xe("Image",ze),Ae=[{value:"multiple_choice",label:"Pilihan Ganda (Tunggal)"},{value:"multiple_selection",label:"Pilihan Ganda Kompleks"},{value:"true_false",label:"Benar/Salah"},{value:"matching",label:"Menjodohkan"},{value:"ordering",label:"Mengurutkan"},{value:"essay",label:"Esai/Uraian"},{value:"numerical_input",label:"Input Angka"},{value:"arrange_words",label:"Susun Kata"}];function Ct(d){const e=T.c(6),{value:a,onValueChange:s,disabled:r}=d;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=t.jsx(me,{className:"w-[180px] h-8 text-xs font-medium bg-white dark:bg-slate-950 border-slate-200 dark:border-slate-800 rounded-lg",children:t.jsx(ue,{placeholder:"Tipe Soal"})}),e[0]=l):l=e[0];let f;e[1]===Symbol.for("react.memo_cache_sentinel")?(f=t.jsx(ce,{children:Ae.map(Be)}),e[1]=f):f=e[1];let n;return e[2]!==r||e[3]!==s||e[4]!==a?(n=t.jsxs(fe,{value:a,onValueChange:s,disabled:r,children:[l,f]}),e[2]=r,e[3]=s,e[4]=a,e[5]=n):n=e[5],n}function Be(d){return t.jsx(de,{value:d.value,className:"text-xs",children:d.label},d.value)}const Ke=d=>{switch(d){case"multiple_choice":case"multiple_selection":return["A","B","C","D"].map((e,a)=>({option_key:e,content:"",is_correct:!1,order:a,media_url:null,media_file:null}));case"true_false":return[{option_key:"T",content:"Benar",is_correct:!0,order:0,media_url:null,media_file:null},{option_key:"F",content:"Salah",is_correct:!1,order:1,media_url:null,media_file:null}];case"matching":return Array.from({length:4}).flatMap((e,a)=>[{option_key:`L${a+1}`,content:"",is_correct:!0,order:a*2,metadata:{side:"left",pair_id:a+1,match_with:`R${a+1}`},media_url:null,media_file:null},{option_key:`R${a+1}`,content:"",is_correct:!0,order:a*2+1,metadata:{side:"right",pair_id:a+1,match_with:`L${a+1}`},media_url:null,media_file:null}]);case"ordering":return[{option_key:"1",content:"",is_correct:!0,order:0,media_url:null,media_file:null},{option_key:"2",content:"",is_correct:!0,order:1,media_url:null,media_file:null},{option_key:"3",content:"",is_correct:!0,order:2,media_url:null,media_file:null},{option_key:"4",content:"",is_correct:!0,order:3,media_url:null,media_file:null}];case"numerical_input":return[{option_key:"NUM",content:"",is_correct:!0,order:0,metadata:{tolerance:0,unit:""},media_url:null,media_file:null}];case"essay":case"short_answer":return[];default:return[]}};function Je(d){const e=T.c(38),{options:a,onChange:s,type:r,errors:l}=d;let f;e[0]!==s||e[1]!==a?(f=(j,y)=>{const C=[...a];C[j]={...C[j],...y},s(C)},e[0]=s,e[1]=a,e[2]=f):f=e[2];const n=f;let k;e[3]!==s||e[4]!==a||e[5]!==r?(k=(j,y,C)=>{const c=[...a];c[j]={...c[j],[y]:C},r==="multiple_choice"&&y==="is_correct"&&C===!0&&c.forEach((O,S)=>{S!==j&&(O.is_correct=!1)}),s(c)},e[3]=s,e[4]=a,e[5]=r,e[6]=k):k=e[6];const u=k;let p;e[7]!==n?(p=(j,y)=>{const C=y.target.files?.[0];C&&n(j,{media_file:C,delete_media:!1})},e[7]=n,e[8]=p):p=e[8];const v=p;let x;e[9]!==n?(x=j=>{n(j,{media_file:null,media_url:null,delete_media:!0})},e[9]=n,e[10]=x):x=e[10];const N=x;let h;e[11]!==s||e[12]!==a?(h=()=>{const j=String.fromCharCode(65+a.length);s([...a,{option_key:j,content:"",is_correct:!1,order:a.length,media_url:null,media_file:null}])},e[11]=s,e[12]=a,e[13]=h):h=e[13];const _=h;let g;e[14]!==s||e[15]!==a?(g=j=>{const y=a.filter((C,c)=>c!==j);y.forEach(Ye),s(y)},e[14]=s,e[15]=a,e[16]=g):g=e[16];const i=g;let o;if(e[17]!==l||e[18]!==v||e[19]!==a||e[20]!==i||e[21]!==N||e[22]!==r||e[23]!==u){let j;e[25]!==l||e[26]!==v||e[27]!==i||e[28]!==N||e[29]!==r||e[30]!==u?(j=(y,C)=>t.jsx(Q,{children:t.jsxs(Z,{className:"p-4 flex items-start gap-4",children:[t.jsx("div",{className:"pt-2",children:t.jsx("span",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-muted font-bold",children:y.option_key})}),t.jsxs("div",{className:"flex-1 space-y-4",children:[t.jsxs("div",{className:"flex flex-col space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(P,{children:"Teks Jawaban"}),t.jsx("div",{className:"flex items-center gap-4",children:t.jsx("div",{className:"flex items-center gap-2",children:r==="multiple_choice"?t.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-1",onClick:()=>u(C,"is_correct",!0),children:[t.jsx("div",{className:`h-4 w-4 rounded-full border border-primary flex items-center justify-center ${y.is_correct?"bg-primary":""}`,children:y.is_correct&&t.jsx("div",{className:"h-2 w-2 rounded-full bg-primary-foreground"})}),t.jsx(P,{className:"cursor-pointer",children:"Benar"})]}):t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ge,{id:`opt-${C}`,checked:y.is_correct,onCheckedChange:c=>u(C,"is_correct",!!c)}),t.jsx(P,{htmlFor:`opt-${C}`,children:"Benar"})]})})})]}),t.jsx(se,{value:y.content,onChange:c=>u(C,"content",c.target.value),placeholder:`Jawaban ${y.option_key}`,className:"resize-none min-h-[80px]"}),l?.[`options.${C}.content`]&&t.jsx("p",{className:"text-destructive text-xs",children:l[`options.${C}.content`]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(P,{children:"Gambar Opsi (Opsional)"}),t.jsxs("div",{className:"flex items-start gap-4",children:[!y.delete_media&&(y.media_url||y.media_file)?t.jsxs("div",{className:"relative group",children:[t.jsx("img",{src:y.media_file?URL.createObjectURL(y.media_file):y.media_url,alt:`Preview ${y.option_key}`,className:"h-32 w-auto min-w-[100px] object-contain rounded-md border bg-muted"}),t.jsx(L,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>N(C),children:t.jsx(A,{className:"h-3 w-3"})})]}):t.jsx("div",{className:"h-32 w-32 flex items-center justify-center rounded-md border border-dashed bg-muted/50 text-muted-foreground",children:t.jsx(H,{className:"h-8 w-8 opacity-50"})}),t.jsxs("div",{className:"space-y-2 pt-2",children:[t.jsx(z,{type:"file",accept:"image/*",onChange:c=>v(C,c),className:"max-w-xs"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Format: JPG, PNG, GIF. Maks: 2MB."})]})]})]})]}),t.jsx(L,{variant:"ghost",size:"icon",onClick:()=>i(C),className:"text-destructive mt-2",children:t.jsx(re,{className:"h-4 w-4"})})]})},C),e[25]=l,e[26]=v,e[27]=i,e[28]=N,e[29]=r,e[30]=u,e[31]=j):j=e[31],o=a.map(j),e[17]=l,e[18]=v,e[19]=a,e[20]=i,e[21]=N,e[22]=r,e[23]=u,e[24]=o}else o=e[24];let b;e[32]===Symbol.for("react.memo_cache_sentinel")?(b=t.jsx(X,{className:"mr-2 h-4 w-4"}),e[32]=b):b=e[32];let m;e[33]!==_?(m=t.jsxs(L,{variant:"outline",onClick:_,className:"w-full",children:[b," Tambah Opsi"]}),e[33]=_,e[34]=m):m=e[34];let w;return e[35]!==o||e[36]!==m?(w=t.jsxs("div",{className:"space-y-4",children:[o,m]}),e[35]=o,e[36]=m,e[37]=w):w=e[37],w}function Ye(d,e){return d.option_key=String.fromCharCode(65+e)}function qe(d){const e=T.c(21),{options:a,onChange:s}=d;let r;e[0]!==s||e[1]!==a?(r=(h,_)=>{const g=[...a];g[h]={...g[h],..._},s(g)},e[0]=s,e[1]=a,e[2]=r):r=e[2];const l=r;let f;e[3]!==s||e[4]!==a?(f=(h,_,g)=>{const i=[...a];i[h]={...i[h],[_]:g},_==="is_correct"&&g===!0&&i.forEach((o,b)=>{b!==h&&(o.is_correct=!1)}),s(i)},e[3]=s,e[4]=a,e[5]=f):f=e[5];const n=f;let k;e[6]!==l?(k=(h,_)=>{const g=_.target.files?.[0];g&&l(h,{media_file:g,delete_media:!1})},e[6]=l,e[7]=k):k=e[7];const u=k;let p;e[8]!==l?(p=h=>{l(h,{media_file:null,media_url:null,delete_media:!0})},e[8]=l,e[9]=p):p=e[9];const v=p;let x;if(e[10]!==u||e[11]!==a||e[12]!==v||e[13]!==n){let h;e[15]!==u||e[16]!==v||e[17]!==n?(h=(_,g)=>t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("div",{className:`p-4 rounded-lg border-2 cursor-pointer transition-all relative ${_.is_correct?"border-primary bg-primary/5":"border-muted hover:border-primary/50"}`,onClick:()=>n(g,"is_correct",!0),children:t.jsxs("div",{className:"flex items-center justify-between z-10 relative w-full gap-2",children:[t.jsx(z,{value:_.content,onChange:i=>n(g,"content",i.target.value),onClick:He,className:"font-semibold text-lg bg-transparent border-transparent hover:border-input focus:border-input px-2 shadow-none h-auto transition-colors"}),_.is_correct&&t.jsx(be,{className:"h-5 w-5 text-primary shrink-0"})]})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(P,{children:"Gambar (Opsional)"}),t.jsxs("div",{className:"flex items-start gap-4",children:[!_.delete_media&&(_.media_url||_.media_file)?t.jsxs("div",{className:"relative group",children:[t.jsx("img",{src:_.media_file?URL.createObjectURL(_.media_file):_.media_url,alt:`Preview ${_.content}`,className:"h-32 w-auto min-w-[100px] object-contain rounded-md border bg-muted"}),t.jsx(L,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>v(g),children:t.jsx(A,{className:"h-3 w-3"})})]}):t.jsx("div",{className:"h-32 w-32 flex items-center justify-center rounded-md border border-dashed bg-muted/50 text-muted-foreground",children:t.jsx(H,{className:"h-8 w-8 opacity-50"})}),t.jsxs("div",{className:"space-y-2 pt-2",children:[t.jsx(z,{type:"file",accept:"image/*",onChange:i=>u(g,i),className:"max-w-xs"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Format: JPG, PNG, GIF. Maks: 2MB."})]})]})]})]},g),e[15]=u,e[16]=v,e[17]=n,e[18]=h):h=e[18],x=a.map(h),e[10]=u,e[11]=a,e[12]=v,e[13]=n,e[14]=x}else x=e[14];let N;return e[19]!==x?(N=t.jsx("div",{className:"grid grid-cols-2 gap-4",children:x}),e[19]=x,e[20]=N):N=e[20],N}function He(d){return d.stopPropagation()}const q=d=>{if(!d)return"border-border bg-card";const e=["border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-950/30","border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-950/30","border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-950/30","border-yellow-200 bg-yellow-50 dark:border-yellow-800 dark:bg-yellow-950/30","border-purple-200 bg-purple-50 dark:border-purple-800 dark:bg-purple-950/30","border-orange-200 bg-orange-50 dark:border-orange-800 dark:bg-orange-950/30"],a=typeof d=="number"?d:parseInt(d)||0;return e[(a-1)%e.length]},oe=d=>{const e=T.c(14),{data:a,id:s}=d,{mediaUrl:r,mediaFile:l,onFileChange:f,onRemoveMedia:n}=a;let k;e[0]!==s||e[1]!==f?(k=h=>{f&&f(s,h)},e[0]=s,e[1]=f,e[2]=k):k=e[2];const u=k;let p;e[3]!==s||e[4]!==l||e[5]!==r||e[6]!==n?(p=r||l?t.jsxs("div",{className:"relative group",children:[t.jsx("img",{src:l?URL.createObjectURL(l):r||"",alt:"Preview",className:"h-20 w-auto min-w-[50px] object-contain rounded-md border bg-muted"}),t.jsx(L,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-5 w-5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>n(s),children:t.jsx(A,{className:"h-3 w-3"})})]}):t.jsxs(P,{htmlFor:`file-${s}`,className:"h-9 w-24 flex items-center justify-center rounded-md border bg-muted/30 text-xs font-medium text-muted-foreground cursor-pointer hover:bg-muted/50 gap-1",children:[t.jsx(H,{className:"h-3 w-3"}),"Image"]}),e[3]=s,e[4]=l,e[5]=r,e[6]=n,e[7]=p):p=e[7];const v=`file-${s}`;let x;e[8]!==u||e[9]!==v?(x=t.jsx("input",{id:v,type:"file",accept:"image/*",onChange:u,className:"hidden"}),e[8]=u,e[9]=v,e[10]=x):x=e[10];let N;return e[11]!==p||e[12]!==x?(N=t.jsx("div",{className:"space-y-2 mt-2",children:t.jsxs("div",{className:"flex items-start gap-2",children:[p,x]})}),e[11]=p,e[12]=x,e[13]=N):N=e[13],N};function Ve(d){const e=T.c(26),{id:a,data:s}=d,r=s;let l;e[0]!==r.colorClass?(l=le("relative p-3 rounded-lg border-2 text-sm flex flex-col min-h-[150px] bg-card w-[400px] shadow-sm transition-colors",r.colorClass),e[0]=r.colorClass,e[1]=l):l=e[1];let f;e[2]===Symbol.for("react.memo_cache_sentinel")?(f=t.jsx("span",{className:"text-xs font-bold text-muted-foreground",children:"Premis"}),e[2]=f):f=e[2];let n;e[3]!==a||e[4]!==r?(n=()=>r.onDelete(a),e[3]=a,e[4]=r,e[5]=n):n=e[5];let k;e[6]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx(A,{className:"h-3 w-3"}),e[6]=k):k=e[6];let u;e[7]!==n?(u=t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f,t.jsx(L,{variant:"ghost",size:"icon",className:"h-5 w-5 ml-auto text-muted-foreground hover:text-destructive",onClick:n,children:k})]}),e[7]=n,e[8]=u):u=e[8];const p=r.content||"";let v;e[9]!==a||e[10]!==r?(v=i=>r.onChange(a,i),e[9]=a,e[10]=r,e[11]=v):v=e[11];let x;e[12]!==p||e[13]!==v?(x=t.jsx(te,{value:p,onChange:v,placeholder:"Teks premis...",className:"min-h-[100px]"}),e[12]=p,e[13]=v,e[14]=x):x=e[14];let N;e[15]!==a||e[16]!==r?(N=t.jsx(oe,{data:r,id:a}),e[15]=a,e[16]=r,e[17]=N):N=e[17];let h;e[18]!==x||e[19]!==N?(h=t.jsxs("div",{className:"space-y-2 flex-1",children:[x,N]}),e[18]=x,e[19]=N,e[20]=h):h=e[20];let _;e[21]===Symbol.for("react.memo_cache_sentinel")?(_=t.jsx(ie,{type:"source",position:ne.Right,className:"w-3 h-3 bg-muted-foreground border-2 border-background transform translate-x-1/2"}),e[21]=_):_=e[21];let g;return e[22]!==l||e[23]!==h||e[24]!==u?(g=t.jsxs("div",{className:l,children:[u,h,_]}),e[22]=l,e[23]=h,e[24]=u,e[25]=g):g=e[25],g}function We(d){const e=T.c(29),{id:a,data:s}=d,r=s;let l;e[0]!==r.colorClass?(l=le("relative p-3 rounded-lg border-2 text-sm flex flex-col min-h-[150px] bg-card w-[400px] shadow-sm transition-colors",r.colorClass),e[0]=r.colorClass,e[1]=l):l=e[1];let f;e[2]===Symbol.for("react.memo_cache_sentinel")?(f=t.jsx(ie,{type:"target",position:ne.Left,className:"w-3 h-3 bg-muted-foreground border-2 border-background transform -translate-x-1/2"}),e[2]=f):f=e[2];let n;e[3]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx("span",{className:"text-xs font-bold text-muted-foreground",children:"Respon"}),e[3]=n):n=e[3];let k;e[4]!==a||e[5]!==r?(k=()=>r.onDelete(a),e[4]=a,e[5]=r,e[6]=k):k=e[6];let u;e[7]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx(A,{className:"h-3 w-3"}),e[7]=u):u=e[7];let p;e[8]!==k?(p=t.jsxs("div",{className:"flex items-center gap-2 mb-2 pl-2",children:[n,t.jsx(L,{variant:"ghost",size:"icon",className:"h-5 w-5 ml-auto text-muted-foreground hover:text-destructive",onClick:k,children:u})]}),e[8]=k,e[9]=p):p=e[9];const v=r.content||"";let x;e[10]!==a||e[11]!==r?(x=o=>r.onChange(a,o),e[10]=a,e[11]=r,e[12]=x):x=e[12];let N;e[13]!==v||e[14]!==x?(N=t.jsx(te,{value:v,onChange:x,placeholder:"Teks respon...",className:"min-h-[100px]"}),e[13]=v,e[14]=x,e[15]=N):N=e[15];let h;e[16]!==a||e[17]!==r?(h=t.jsx("div",{className:"flex justify-end mt-2",children:t.jsx(oe,{data:r,id:a})}),e[16]=a,e[17]=r,e[18]=h):h=e[18];let _;e[19]!==h||e[20]!==N?(_=t.jsxs("div",{className:"space-y-2 flex-1 relative",children:[N,h]}),e[19]=h,e[20]=N,e[21]=_):_=e[21];let g;e[22]!==r.pairId?(g=r.pairId&&t.jsx("div",{className:"absolute -top-2 -right-2 bg-primary text-primary-foreground text-[10px] px-1.5 py-0.5 rounded-full font-bold shadow-sm z-10",children:r.pairId}),e[22]=r.pairId,e[23]=g):g=e[23];let i;return e[24]!==l||e[25]!==_||e[26]!==g||e[27]!==p?(i=t.jsxs("div",{className:l,children:[f,p,_,g]}),e[24]=l,e[25]=_,e[26]=g,e[27]=p,e[28]=i):i=e[28],i}const Xe={leftNode:Ve,rightNode:We};function Qe({options:d,onChange:e}){const[a,s,r]=je([]),[l,f,n]=ye([]);F.useEffect(()=>{if(a.length>0||l.length>0)return;const i=d.filter(c=>c.metadata?.side==="left"),o=d.filter(c=>c.metadata?.side==="right"),b=[],m=[],w=50,j=700,y=50,C=300;i.forEach((c,O)=>{b.push({id:c.id||`temp-L-${O}`,type:"leftNode",position:{x:w,y:y+O*C},data:{...c,content:c.content||"",onChange:()=>{},onFileChange:()=>{},onRemoveMedia:()=>{},onDelete:()=>{},colorClass:q(c.metadata?.pair_id)}})}),o.forEach((c,O)=>{b.push({id:c.id||`temp-R-${O}`,type:"rightNode",position:{x:j,y:y+O*C},data:{...c,content:c.content||"",onChange:()=>{},onFileChange:()=>{},onRemoveMedia:()=>{},onDelete:()=>{},colorClass:q(c.metadata?.pair_id)}})}),i.forEach(c=>{if(c.metadata?.pair_id){const O=o.find(S=>S.metadata?.pair_id==c.metadata?.pair_id);if(O){const S=c.id||`temp-L-${i.indexOf(c)}`,R=O.id||`temp-R-${o.indexOf(O)}`;m.push({id:`e-${S}-${R}`,source:S,target:R,type:"default",animated:!0,style:{strokeWidth:2},markerEnd:{type:Ne.ArrowClosed},data:{pairId:c.metadata?.pair_id}})}}}),s(b.map(c=>({...c,data:{...c.data,onChange:k,onFileChange:u,onRemoveMedia:p,onDelete:v,colorClass:q(c.data.metadata?.pair_id)}}))),f(m)},[]);const k=F.useCallback((i,o)=>{s(b=>b.map(m=>m.id===i?{...m,data:{...m.data,content:o}}:m))},[s]),u=F.useCallback((i,o)=>{const b=o.target.files?.[0];b&&s(m=>m.map(w=>w.id===i?{...w,data:{...w.data,mediaFile:b,delete_media:!1}}:w))},[s]),p=F.useCallback(i=>{s(o=>o.map(b=>b.id===i?{...b,data:{...b.data,mediaFile:null,mediaUrl:null,media_url:null,delete_media:!0}}:b))},[s]),v=F.useCallback(i=>{s(o=>o.filter(b=>b.id!==i)),f(o=>o.filter(b=>b.source!==i&&b.target!==i))},[s,f]);F.useEffect(()=>{if(a.length===0&&d.length===0)return;const i=a.map((o,b)=>{const m=l.find(y=>o.type==="leftNode"?y.source===o.id:y.target===o.id),w=o.data;let j=w.metadata?.pair_id;return m?j=l.indexOf(m)+1:j=void 0,{id:o.id.startsWith("temp-")?void 0:o.id,question_id:w.question_id,option_key:(o.type==="leftNode"?"L":"R")+(b+1),content:w.content||"",media_path:w.media_path,media_url:w.media_url,media_file:w.mediaFile,delete_media:w.delete_media,is_correct:!0,order:b,metadata:{side:o.type==="leftNode"?"left":"right",pair_id:j}}});e(i)},[a,l]),F.useEffect(()=>{s(i=>i.map(o=>{const b=l.find(j=>o.type==="leftNode"&&j.source===o.id||o.type==="rightNode"&&j.target===o.id);let m;b&&(m=l.indexOf(b)+1);const w=o.data;return w.metadata?.pair_id!==m||w.pairId!==m?{...o,data:{...o.data,metadata:{...w.metadata,pair_id:m},pairId:m,colorClass:q(m)}}:o}))},[l]);const x=F.useCallback(i=>{f(o=>{const b=o.filter(m=>m.source!==i.source&&m.target!==i.target);return ve({...i,animated:!0,style:{strokeWidth:2}},b)})},[f]),N=()=>{const i=`temp-L-${Date.now()}`,o=a.filter(m=>m.type==="leftNode").reduce((m,w)=>Math.max(m,w.position.y),0)||0,b={id:i,type:"leftNode",position:{x:50,y:o+300},data:{content:"",metadata:{side:"left"},onChange:k,onFileChange:u,onRemoveMedia:p,onDelete:v,colorClass:q(null)}};s(m=>[...m,b])},h=()=>{const i=`temp-R-${Date.now()}`,o=a.filter(m=>m.type==="rightNode").reduce((m,w)=>Math.max(m,w.position.y),0)||0,b={id:i,type:"rightNode",position:{x:700,y:o+300},data:{content:"",metadata:{side:"right"},onChange:k,onFileChange:u,onRemoveMedia:p,onDelete:v,colorClass:q(null)}};s(m=>[...m,b])},_=Math.max(a.filter(i=>i.type==="leftNode").length,a.filter(i=>i.type==="rightNode").length),g=Math.max(600,_*300+100);return t.jsx("div",{className:"w-full border rounded-xl bg-muted/10 relative group",style:{height:`${g}px`},children:t.jsxs(ke,{nodes:a,edges:l,onNodesChange:r,onEdgesChange:n,onConnect:x,nodeTypes:Xe,proOptions:{hideAttribution:!0},fitView:!0,children:[t.jsx(we,{color:"#94a3b8",gap:20,size:1}),t.jsx(Ce,{}),t.jsxs(Oe,{position:"top-right",className:"flex gap-2",children:[t.jsxs(L,{onClick:N,size:"sm",variant:"secondary",className:"shadow-sm",children:[t.jsx(X,{className:"w-4 h-4 mr-1"})," Add Premis"]}),t.jsxs(L,{onClick:h,size:"sm",variant:"secondary",className:"shadow-sm",children:[t.jsx(X,{className:"w-4 h-4 mr-1"})," Add Respon"]})]})]})})}function Ze(d){const e=T.c(2);let a;return e[0]!==d?(a=t.jsx(_e,{children:t.jsx(Qe,{...d})}),e[0]=d,e[1]=a):a=e[1],a}function et(d){const e=T.c(59),{id:a,option:s,index:r,updateOption:l,removeOption:f,handleOptionFileChange:n,removeOptionMedia:k}=d;let u;e[0]!==a?(u={id:a},e[0]=a,e[1]=u):u=e[1];const{attributes:p,listeners:v,setNodeRef:x,transform:N,transition:h,isDragging:_}=De(u);let g;e[2]!==N?(g=Ge.Transform.toString(N),e[2]=N,e[3]=g):g=e[3];const i=_?10:1,o=_?.5:1;let b;e[4]!==g||e[5]!==i||e[6]!==o||e[7]!==h?(b={transform:g,transition:h,zIndex:i,opacity:o},e[4]=g,e[5]=i,e[6]=o,e[7]=h,e[8]=b):b=e[8];const m=b;let w;e[9]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx(Ue,{className:"h-5 w-5"}),e[9]=w):w=e[9];let j;e[10]!==p||e[11]!==v?(j=t.jsx("div",{...p,...v,className:"cursor-grab hover:text-primary active:cursor-grabbing text-muted-foreground p-1 rounded-sm hover:bg-muted",children:w}),e[10]=p,e[11]=v,e[12]=j):j=e[12];const y=r+1;let C;e[13]!==y?(C=t.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 text-primary flex items-center justify-center font-bold shrink-0",children:y}),e[13]=y,e[14]=C):C=e[14];let c;e[15]!==r||e[16]!==l?(c=ee=>l(r,"content",ee.target.value),e[15]=r,e[16]=l,e[17]=c):c=e[17];const O=`Langkah ke-${r+1}`;let S;e[18]!==s.content||e[19]!==c||e[20]!==O?(S=t.jsx(z,{value:s.content,onChange:c,placeholder:O}),e[18]=s.content,e[19]=c,e[20]=O,e[21]=S):S=e[21];let R;e[22]!==r||e[23]!==f?(R=()=>f(r),e[22]=r,e[23]=f,e[24]=R):R=e[24];let $;e[25]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx(re,{className:"h-4 w-4"}),e[25]=$):$=e[25];let M;e[26]!==R?(M=t.jsx(L,{variant:"ghost",size:"icon",onClick:R,className:"text-muted-foreground",children:$}),e[26]=R,e[27]=M):M=e[27];let E;e[28]!==S||e[29]!==M||e[30]!==j||e[31]!==C?(E=t.jsxs("div",{className:"flex items-center gap-3",children:[j,C,S,M]}),e[28]=S,e[29]=M,e[30]=j,e[31]=C,e[32]=E):E=e[32];let I;e[33]!==r||e[34]!==s.delete_media||e[35]!==s.media_file||e[36]!==s.media_url||e[37]!==k?(I=!s.delete_media&&(s.media_url||s.media_file)?t.jsxs("div",{className:"relative group/media",children:[t.jsx("img",{src:s.media_file?URL.createObjectURL(s.media_file):s.media_url,alt:`Preview Step ${r+1}`,className:"h-24 w-auto min-w-[80px] object-contain rounded-md border bg-muted"}),t.jsx(L,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full opacity-0 group-hover/media:opacity-100 transition-opacity",onClick:()=>k(r),children:t.jsx(A,{className:"h-3 w-3"})})]}):t.jsx("div",{className:"h-24 w-24 flex items-center justify-center rounded-md border border-dashed bg-muted/50 text-muted-foreground",children:t.jsx(H,{className:"h-6 w-6 opacity-50"})}),e[33]=r,e[34]=s.delete_media,e[35]=s.media_file,e[36]=s.media_url,e[37]=k,e[38]=I):I=e[38];const G=`order-file-${s.option_key}`,V=s.media_url||s.media_file?"Ganti Gambar":"Tambah Gambar";let D;e[39]!==G||e[40]!==V?(D=t.jsx(P,{htmlFor:G,className:"cursor-pointer text-xs font-medium text-primary hover:text-primary/80 transition-colors",children:V}),e[39]=G,e[40]=V,e[41]=D):D=e[41];const U=`order-file-${s.option_key}`;let B;e[42]!==n||e[43]!==r?(B=ee=>n(r,ee),e[42]=n,e[43]=r,e[44]=B):B=e[44];let K;e[45]!==U||e[46]!==B?(K=t.jsx(z,{id:U,type:"file",accept:"image/*",onChange:B,className:"max-w-xs h-8 text-xs"}),e[45]=U,e[46]=B,e[47]=K):K=e[47];let J;e[48]!==D||e[49]!==K?(J=t.jsxs("div",{className:"space-y-2 pt-2",children:[D,K]}),e[48]=D,e[49]=K,e[50]=J):J=e[50];let Y;e[51]!==I||e[52]!==J?(Y=t.jsx("div",{className:"ml-14 mt-2 space-y-2",children:t.jsxs("div",{className:"flex items-start gap-4",children:[I,J]})}),e[51]=I,e[52]=J,e[53]=Y):Y=e[53];let W;return e[54]!==x||e[55]!==m||e[56]!==E||e[57]!==Y?(W=t.jsxs("div",{ref:x,style:m,className:"flex flex-col gap-2 p-4 border rounded-md bg-card relative group",children:[E,Y]}),e[54]=x,e[55]=m,e[56]=E,e[57]=Y,e[58]=W):W=e[58],W}function tt(d){const e=T.c(49),{options:a,onChange:s}=d;let r;e[0]!==s||e[1]!==a?(r=($,M)=>{const E=[...a];E[$]={...E[$],...M},s(E)},e[0]=s,e[1]=a,e[2]=r):r=e[2];const l=r;let f;e[3]!==s||e[4]!==a?(f=($,M,E)=>{const I=[...a];I[$]={...I[$],[M]:E},s(I)},e[3]=s,e[4]=a,e[5]=f):f=e[5];const n=f;let k;e[6]!==l?(k=($,M)=>{const E=M.target.files?.[0];E&&l($,{media_file:E,delete_media:!1})},e[6]=l,e[7]=k):k=e[7];const u=k;let p;e[8]!==l?(p=$=>{l($,{media_file:null,media_url:null,delete_media:!0})},e[8]=l,e[9]=p):p=e[9];const v=p;let x;e[10]!==s||e[11]!==a?(x=()=>{s([...a,{option_key:crypto.randomUUID(),content:"",is_correct:!0,order:a.length,media_url:null,media_file:null}])},e[10]=s,e[11]=a,e[12]=x):x=e[12];const N=x;let h;e[13]!==s||e[14]!==a?(h=$=>{const E=a.filter((I,G)=>G!==$).map(lt);s(E)},e[13]=s,e[14]=a,e[15]=h):h=e[15];const _=h;let g;e[16]===Symbol.for("react.memo_cache_sentinel")?(g={coordinateGetter:Ee},e[16]=g):g=e[16];const i=$e(ae(Te),ae(Le,g));let o;e[17]!==s||e[18]!==a?(o=$=>{const{active:M,over:E}=$;if(M.id!==E?.id){const I=a.findIndex(U=>U.option_key===M.id),G=a.findIndex(U=>U.option_key===E?.id),D=Re(a,I,G).map(st);s(D)}},e[17]=s,e[18]=a,e[19]=o):o=e[19];const b=o;let m;e[20]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Urutkan opsi di bawah ini sesuai urutan yang benar. Geser ikon grip untuk mengubah urutan."}),e[20]=m):m=e[20];let w;e[21]!==a?(w=a.map(at),e[21]=a,e[22]=w):w=e[22];let j;if(e[23]!==u||e[24]!==a||e[25]!==_||e[26]!==v||e[27]!==n){let $;e[29]!==u||e[30]!==_||e[31]!==v||e[32]!==n?($=(M,E)=>t.jsx(et,{id:M.option_key,option:M,index:E,updateOption:n,removeOption:_,handleOptionFileChange:u,removeOptionMedia:v},M.option_key),e[29]=u,e[30]=_,e[31]=v,e[32]=n,e[33]=$):$=e[33],j=a.map($),e[23]=u,e[24]=a,e[25]=_,e[26]=v,e[27]=n,e[28]=j}else j=e[28];let y;e[34]!==j?(y=t.jsx("div",{className:"space-y-3",children:j}),e[34]=j,e[35]=y):y=e[35];let C;e[36]!==w||e[37]!==y?(C=t.jsx(Me,{items:w,strategy:Ie,children:y}),e[36]=w,e[37]=y,e[38]=C):C=e[38];let c;e[39]!==b||e[40]!==i||e[41]!==C?(c=t.jsx(Fe,{sensors:i,collisionDetection:Pe,onDragEnd:b,children:C}),e[39]=b,e[40]=i,e[41]=C,e[42]=c):c=e[42];let O;e[43]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx(X,{className:"mr-2 h-4 w-4"}),e[43]=O):O=e[43];let S;e[44]!==N?(S=t.jsxs(L,{variant:"outline",onClick:N,className:"mt-2",children:[O," Tambah Langkah"]}),e[44]=N,e[45]=S):S=e[45];let R;return e[46]!==c||e[47]!==S?(R=t.jsxs("div",{className:"space-y-4",children:[m,c,S]}),e[46]=c,e[47]=S,e[48]=R):R=e[48],R}function at(d){return d.option_key}function st(d,e){return{...d,order:e}}function lt(d,e){return{...d,order:e}}function rt(d){const e=T.c(38),{options:a,onChange:s}=d;let r;e[0]!==a[0]?(r=a[0]||{option_key:"NUM",content:"",is_correct:!0,order:0,metadata:{},media_url:null,media_file:null},e[0]=a[0],e[1]=r):r=e[1];const l=r;let f;e[2]!==s||e[3]!==a?(f=c=>{const O=[...a];O.length===0?O.push(c):O[0]=c,s(O)},e[2]=s,e[3]=a,e[4]=f):f=e[4];const n=f;let k;e[5]!==l||e[6]!==n?(k=c=>{const O={...l,content:c};O.metadata={...O.metadata,correct_answer:c},n(O)},e[5]=l,e[6]=n,e[7]=k):k=e[7];const u=k;let p;e[8]!==l||e[9]!==n?(p=c=>{const O=c.target.files?.[0];if(O){const S={...l,media_file:O,delete_media:!1};n(S)}},e[8]=l,e[9]=n,e[10]=p):p=e[10];const v=p;let x;e[11]!==l||e[12]!==n?(x=()=>{const c={...l,media_file:null,media_url:null,delete_media:!0};n(c)},e[11]=l,e[12]=n,e[13]=x):x=e[13];const N=x;let h;e[14]===Symbol.for("react.memo_cache_sentinel")?(h=t.jsx(he,{children:t.jsx(pe,{className:"text-base",children:"Jawaban Angka (Rumus Matematika)"})}),e[14]=h):h=e[14];let _;e[15]===Symbol.for("react.memo_cache_sentinel")?(_=t.jsx(P,{children:"Jawaban Benar"}),e[15]=_):_=e[15];let g;e[16]!==l.content||e[17]!==u?(g=t.jsxs("div",{className:"space-y-2",children:[_,t.jsx(Se,{value:l.content,onChange:u,placeholder:"Ketik jawaban atau rumus matematika...",className:"w-full p-4 text-lg border rounded-lg bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-blue-500 outline-none"})]}),e[16]=l.content,e[17]=u,e[18]=g):g=e[18];let i;e[19]!==l.delete_media||e[20]!==l.media_file||e[21]!==l.media_url||e[22]!==N?(i=!l.delete_media&&(l.media_url||l.media_file)?t.jsxs("div",{className:"relative group",children:[t.jsx("img",{src:l.media_file?URL.createObjectURL(l.media_file):l.media_url,alt:"Preview",className:"h-32 w-auto min-w-[100px] object-contain rounded-md border bg-muted"}),t.jsx(L,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",onClick:N,children:t.jsx(A,{className:"h-3 w-3"})})]}):t.jsx("div",{className:"h-32 w-32 flex items-center justify-center rounded-md border border-dashed bg-muted/50 text-muted-foreground",children:t.jsx(H,{className:"h-8 w-8 opacity-50"})}),e[19]=l.delete_media,e[20]=l.media_file,e[21]=l.media_url,e[22]=N,e[23]=i):i=e[23];const o=l.media_url||l.media_file?"Ganti Gambar Penjelasan":"Tambah Gambar Penjelasan";let b;e[24]!==o?(b=t.jsx(P,{htmlFor:"num-file",className:"cursor-pointer text-xs font-medium text-primary hover:text-primary/80 transition-colors",children:o}),e[24]=o,e[25]=b):b=e[25];let m;e[26]!==v?(m=t.jsx(z,{id:"num-file",type:"file",accept:"image/*",onChange:v,className:"max-w-xs h-8 text-xs"}),e[26]=v,e[27]=m):m=e[27];let w;e[28]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Format: JPG, PNG, GIF. Maks: 2MB."}),e[28]=w):w=e[28];let j;e[29]!==b||e[30]!==m?(j=t.jsxs("div",{className:"space-y-2 pt-2",children:[b,m,w]}),e[29]=b,e[30]=m,e[31]=j):j=e[31];let y;e[32]!==j||e[33]!==i?(y=t.jsx("div",{className:"space-y-2 border-t pt-4",children:t.jsxs("div",{className:"flex items-start gap-4",children:[i,j]})}),e[32]=j,e[33]=i,e[34]=y):y=e[34];let C;return e[35]!==y||e[36]!==g?(C=t.jsxs(Q,{children:[h,t.jsxs(Z,{className:"space-y-4",children:[g,y]})]}),e[35]=y,e[36]=g,e[37]=C):C=e[37],C}function it(d){const e=T.c(13),{options:a,onChange:s,errors:r}=d,l=a[0]?.content||"";let f;e[0]!==s?(f=h=>{s([{option_key:"ESSAY",content:h,is_correct:!0,order:0,media_url:null,media_file:null}])},e[0]=s,e[1]=f):f=e[1];const n=f;let k;e[2]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsxs("div",{className:"space-y-2",children:[t.jsx(P,{children:"Kriteria Jawaban / Rubrik Penilaian"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Masukkan kriteria jawaban atau rubrik penilaian yang diharapkan untuk soal essay ini. Ini akan membantu dalam proses koreksi manual."})]}),e[2]=k):k=e[2];let u;e[3]!==l||e[4]!==n?(u=t.jsx(te,{value:l,onChange:n,placeholder:"Tulis kriteria jawaban atau rubrik penilaian di sini...",className:"min-h-[200px]"}),e[3]=l,e[4]=n,e[5]=u):u=e[5];let p;e[6]!==r?(p=r?.["options.0.content"]&&t.jsx("p",{className:"text-destructive text-xs",children:r["options.0.content"]}),e[6]=r,e[7]=p):p=e[7];let v;e[8]===Symbol.for("react.memo_cache_sentinel")?(v=t.jsx("p",{className:"font-medium mb-1",children:"ðŸ’¡ Catatan:"}),e[8]=v):v=e[8];let x;e[9]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsxs("div",{className:"bg-muted/50 p-3 rounded-md text-sm text-muted-foreground",children:[v,t.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[t.jsx("li",{children:"Soal essay memerlukan koreksi manual oleh pengajar"}),t.jsx("li",{children:"Gunakan editor di atas untuk menulis kriteria atau rubrik penilaian"}),t.jsx("li",{children:"Anda dapat menggunakan format matematika, teks Arab, atau Jawa sesuai kebutuhan"})]})]}),e[9]=x):x=e[9];let N;return e[10]!==u||e[11]!==p?(N=t.jsx("div",{className:"space-y-4",children:t.jsx(Q,{children:t.jsxs(Z,{className:"p-4 space-y-4",children:[k,u,p,x]})})}),e[10]=u,e[11]=p,e[12]=N):N=e[12],N}function nt(d){const e=T.c(33),{options:a,onChange:s}=d,r=Array.isArray(a)&&a.length>0?a[0]:null,[l,f]=F.useState(r?.content||""),[n,k]=F.useState(r?.metadata?.delimiter||" ");let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=[],e[0]=u):u=e[0];const[p,v]=F.useState(u);let x,N;e[1]!==n||e[2]!==l?(x=()=>{v(l?l.split(n).filter(ct):[])},N=[l,n],e[1]=n,e[2]=l,e[3]=x,e[4]=N):(x=e[3],N=e[4]),F.useEffect(x,N);let h;e[5]!==s?(h=(R,$)=>{f(R),k($),s([{option_key:"SENTENCE",content:R,is_correct:!0,order:0,metadata:{delimiter:$}}])},e[5]=s,e[6]=h):h=e[6];const _=h;let g;e[7]===Symbol.for("react.memo_cache_sentinel")?(g=t.jsx(P,{children:"Kalimat Lengkap"}),e[7]=g):g=e[7];let i;e[8]!==n||e[9]!==_?(i=R=>_(R.target.value,n),e[8]=n,e[9]=_,e[10]=i):i=e[10];let o;e[11]!==l||e[12]!==i?(o=t.jsx(se,{placeholder:"Contoh: Saya pergi ke pasar membeli sayur",value:l,onChange:i,rows:3}),e[11]=l,e[12]=i,e[13]=o):o=e[13];let b;e[14]===Symbol.for("react.memo_cache_sentinel")?(b=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Masukkan kalimat lengkap yang benar. Sistem akan mengacak urutan kata secara otomatis."}),e[14]=b):b=e[14];let m;e[15]!==o?(m=t.jsxs("div",{className:"space-y-2",children:[g,o,b]}),e[15]=o,e[16]=m):m=e[16];let w;e[17]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx(P,{children:"Pemisah Kata (Delimiter)"}),e[17]=w):w=e[17];let j;e[18]!==_||e[19]!==l?(j=R=>_(l,R.target.value),e[18]=_,e[19]=l,e[20]=j):j=e[20];let y;e[21]!==n||e[22]!==j?(y=t.jsx(z,{className:"w-20 font-mono text-center",value:n,onChange:j,maxLength:5}),e[21]=n,e[22]=j,e[23]=y):y=e[23];let C;e[24]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx("span",{className:"text-sm text-muted-foreground",children:"Karakter yang digunakan untuk memisahkan kata (Default: spasi)."}),e[24]=C):C=e[24];let c;e[25]!==y?(c=t.jsxs("div",{className:"space-y-2",children:[w,t.jsxs("div",{className:"flex items-center gap-2",children:[y,C]})]}),e[25]=y,e[26]=c):c=e[26];let O;e[27]!==p?(O=p.length>0&&t.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[t.jsxs(P,{children:["Preview Tokenisasi (",p.length," kata)"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(ot)})]}),e[27]=p,e[28]=O):O=e[28];let S;return e[29]!==c||e[30]!==O||e[31]!==m?(S=t.jsx("div",{className:"space-y-6",children:t.jsx(Q,{children:t.jsxs(Z,{className:"pt-6 space-y-4",children:[m,c,O]})})}),e[29]=c,e[30]=O,e[31]=m,e[32]=S):S=e[32],S}function ot(d,e){return t.jsx("span",{className:"px-3 py-1 bg-secondary text-secondary-foreground rounded-md text-sm border",children:d},e)}function ct(d){return d.length>0}function Ot({type:d,options:e,onChange:a,errors:s}){F.useEffect(()=>{e.length===0&&r(d)},[d]);const r=l=>{if(e.length>0)return;const f=Ke(l);f.length>0&&a(f)};return d==="multiple_choice"||d==="multiple_selection"?t.jsx(Je,{type:d,options:e,onChange:a,errors:s}):d==="true_false"?t.jsx(qe,{options:e,onChange:a,errors:s}):d==="matching"?t.jsx(Ze,{options:e,onChange:a,errors:s}):d==="ordering"?t.jsx(tt,{options:e,onChange:a,errors:s}):d==="numerical_input"?t.jsx(rt,{options:e,onChange:a,errors:s}):d==="essay"?t.jsx(it,{options:e,onChange:a,errors:s}):d==="arrange_words"?t.jsx(nt,{options:e,onChange:a}):t.jsx("div",{className:"text-muted-foreground italic",children:"Editor untuk tipe soal ini belum tersedia."})}export{H as I,Ot as O,Ct as Q,Ke as g};
