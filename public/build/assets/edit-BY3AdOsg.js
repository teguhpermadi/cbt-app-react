import{c as Se,u as ke,r as ie,j as t,L as Te,H as Ee}from"./app-BL23_ioL.js";import{B as xe}from"./button-ErPUhfKM.js";import{b as _e,c as ye,C as be,a as je}from"./card-BPYLlYs-.js";import{I as Qe}from"./input-CZPc4iR6.js";import{L as Ae}from"./label-CDDyI8HS.js";import{R as ve}from"./RichTextEditor-BBqXt6Vd.js";import{A as De,b as Le,a as Me}from"./alert-CQgogwjL.js";import{D as Oe,T as Re,S as Pe}from"./ScoreSelector-DIAoZ7CZ.js";import{Q as Ve,O as Be,g as He,I as Ie}from"./OptionsEditor-CdB5dEtR.js";import{Q as Fe}from"./QuestionBankController-VWCdcKL6.js";import{Q as Ge}from"./QuestionController-D8rxudnx.js";import{A as Ue}from"./arrow-left-DtOF6xQY.js";import{S as ze}from"./save-D3ZHDlxg.js";import{C as Ke}from"./circle-alert-Db82dbeJ.js";import{X as $e}from"./x-Bvzm8Mbo.js";/* empty css            */import"./index-BoQRUedT.js";import"./index-CCL8Hooa.js";import"./checkbox-BB3F9eKw.js";import"./index-DuTHxAZ2.js";import"./index-BzB_uvRg.js";import"./index-Uqd2XL9l.js";import"./select-1dTW8A67.js";import"./index-BdQq_4o_.js";import"./index-CQgWKaQN.js";import"./index-DFAfDP5U.js";import"./index-CneOgjps.js";import"./chevron-down-sjlZp7h5.js";import"./clock-C56MbyDU.js";import"./star-CKh0qepW.js";import"./textarea-L_TQdpuK.js";import"./trash-2-BZUYrCA3.js";import"./plus-BCgrxRhX.js";import"./square-check-big-CfvcNerE.js";import"./style-CnmbGnv_.js";import"./sortable.esm-DG6MMUaM.js";import"./grip-vertical-CIej0FFK.js";import"./index-DW9AIAM8.js";function Ot(n){const e=Se.c(115),{question:i}=n,oe=i.content||"",ge=i.question_type,we=i.difficulty_level,Ne=i.timer,qe=i.score_value;let c;e[0]!==i.options?(c=i.options.map(We),e[0]=i.options,e[1]=c):c=e[1];const le=i.hint||"";let P;e[2]!==i.difficulty_level||e[3]!==i.question_type||e[4]!==i.score_value||e[5]!==i.timer||e[6]!==oe||e[7]!==c||e[8]!==le?(P={_method:"PUT",content:oe,question_type:ge,difficulty_level:we,timer:Ne,score_value:qe,options:c,question_media:null,delete_question_media:!1,hint:le},e[2]=i.difficulty_level,e[3]=i.question_type,e[4]=i.score_value,e[5]=i.timer,e[6]=oe,e[7]=c,e[8]=le,e[9]=P):P=e[9];const Ce=P,{data:s,setData:o,post:ne,processing:ae,errors:r}=ke(Ce),[V,he]=ie.useState(i.media_url||null);let B;e[10]===Symbol.for("react.memo_cache_sentinel")?(B={},e[10]=B):B=e[10];const H=ie.useRef(B);let I;e[11]!==i.options||e[12]!==i.question_type?(I=()=>{H.current[i.question_type]=i.options},e[11]=i.options,e[12]=i.question_type,e[13]=I):I=e[13];let F;e[14]===Symbol.for("react.memo_cache_sentinel")?(F=[],e[14]=F):F=e[14],ie.useEffect(I,F);let G;e[15]!==s.options||e[16]!==s.question_type||e[17]!==o?(G=l=>{H.current[s.question_type]=s.options;let a;H.current[l]?a=H.current[l]:a=He(l),o(fe=>({...fe,question_type:l,options:a}))},e[15]=s.options,e[16]=s.question_type,e[17]=o,e[18]=G):G=e[18];const re=G,[U,R]=ie.useState(null);let z;e[19]!==s.content||e[20]!==s.options||e[21]!==ne||e[22]!==i.id?(z=l=>{if(l.preventDefault(),R(null),!s.content||s.content.trim()===""){R("Konten soal wajib diisi."),window.scrollTo({top:0,behavior:"smooth"});return}if(!s.options||s.options.length===0){R("Opsi jawaban harus tersedia."),window.scrollTo({top:0,behavior:"smooth"});return}if(s.options.some(Xe),!s.options.some(Je)){R("Harus ada setidaknya satu kunci jawaban yang dipilih."),window.scrollTo({top:0,behavior:"smooth"});return}ne(Ge.update(i.id).url,{forceFormData:!0,onError:()=>{R("Terjadi kesalahan saat menyimpan. Periksa kembali inputan anda.")}})},e[19]=s.content,e[20]=s.options,e[21]=ne,e[22]=i.id,e[23]=z):z=e[23];const ce=z;let K;e[24]!==o?(K=l=>{const a=l.target.files?.[0];if(a){o("question_media",a),o("delete_question_media",!1);const fe=URL.createObjectURL(a);he(fe)}},e[24]=o,e[25]=K):K=e[25];const me=K;let $;e[26]!==o?($=()=>{o("question_media",null),o("delete_question_media",!0),he(null)},e[26]=o,e[27]=$):$=e[27];const de=$,ue=`Edit Soal # ${i.id}`;let m;e[28]!==ue?(m=t.jsx(Ee,{title:ue}),e[28]=ue,e[29]=m):m=e[29];let d;e[30]!==i.question_bank_id?(d=Fe.edit(i.question_bank_id),e[30]=i.question_bank_id,e[31]=d):d=e[31];let J;e[32]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx(Ue,{className:"h-4 w-4"}),e[32]=J):J=e[32];let u;e[33]!==d.url?(u=t.jsx(Te,{href:d.url,className:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground h-9 w-9",children:J}),e[33]=d.url,e[34]=u):u=e[34];let X;e[35]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx("div",{className:"h-6 w-px bg-border mx-2"}),e[35]=X):X=e[35];let p;e[36]!==s.question_type||e[37]!==re?(p=t.jsx(Ve,{value:s.question_type,onValueChange:re}),e[36]=s.question_type,e[37]=re,e[38]=p):p=e[38];let f;e[39]!==o?(f=l=>o("difficulty_level",l),e[39]=o,e[40]=f):f=e[40];let h;e[41]!==s.difficulty_level||e[42]!==f?(h=t.jsx(Oe,{value:s.difficulty_level,onValueChange:f}),e[41]=s.difficulty_level,e[42]=f,e[43]=h):h=e[43];let x;e[44]!==o?(x=l=>o("timer",l),e[44]=o,e[45]=x):x=e[45];let _;e[46]!==s.timer||e[47]!==x?(_=t.jsx(Re,{value:s.timer,onValueChange:x}),e[46]=s.timer,e[47]=x,e[48]=_):_=e[48];let y;e[49]!==o?(y=l=>o("score_value",l),e[49]=o,e[50]=y):y=e[50];let b;e[51]!==s.score_value||e[52]!==y?(b=t.jsx(Pe,{value:s.score_value,onValueChange:y}),e[51]=s.score_value,e[52]=y,e[53]=b):b=e[53];let j;e[54]!==p||e[55]!==h||e[56]!==_||e[57]!==b?(j=t.jsxs("div",{className:"flex items-center gap-2 flex-1 overflow-x-auto pb-1 md:pb-0",children:[p,h,_,b]}),e[54]=p,e[55]=h,e[56]=_,e[57]=b,e[58]=j):j=e[58];let W;e[59]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx(ze,{className:"h-4 w-4"}),e[59]=W):W=e[59];let v;e[60]!==ae||e[61]!==ce?(v=t.jsxs(xe,{onClick:ce,disabled:ae,className:"gap-2",children:[W,"Simpan"]}),e[60]=ae,e[61]=ce,e[62]=v):v=e[62];let g;e[63]!==u||e[64]!==j||e[65]!==v?(g=t.jsxs("div",{className:"sticky top-0 z-30 flex h-16 items-center gap-4 border-b bg-background px-6 shadow-sm",children:[u,X,j,v]}),e[63]=u,e[64]=j,e[65]=v,e[66]=g):g=e[66];let w;e[67]!==U?(w=U&&t.jsxs(De,{variant:"destructive",children:[t.jsx(Ke,{className:"h-4 w-4"}),t.jsx(Le,{children:"Error Validasi"}),t.jsx(Me,{children:U})]}),e[67]=U,e[68]=w):w=e[68];let Y;e[69]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx(_e,{children:t.jsx(ye,{className:"text-lg",children:"Konten Soal"})}),e[69]=Y):Y=e[69];let N;e[70]!==o?(N=l=>o("content",l),e[70]=o,e[71]=N):N=e[71];let q;e[72]!==s.content||e[73]!==N?(q=t.jsx(ve,{value:s.content,onChange:N,placeholder:"Tuliskan pertanyaan di sini...",className:"min-h-[120px]"}),e[72]=s.content,e[73]=N,e[74]=q):q=e[74];let C;e[75]!==r.content?(C=r.content&&t.jsx("p",{className:"text-red-500 text-sm",children:r.content}),e[75]=r.content,e[76]=C):C=e[76];let Z;e[77]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx(Ae,{children:"Media / Gambar (Opsional)"}),e[77]=Z):Z=e[77];let S;e[78]!==V||e[79]!==de?(S=V?t.jsxs("div",{className:"relative group",children:[t.jsx("img",{src:V,alt:"Preview",className:"h-40 w-auto object-contain rounded-md border bg-muted"}),t.jsx(xe,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",onClick:de,children:t.jsx($e,{className:"h-3 w-3"})})]}):t.jsx("div",{className:"h-40 w-40 flex items-center justify-center rounded-md border border-dashed bg-muted/50 text-muted-foreground",children:t.jsx(Ie,{className:"h-10 w-10 opacity-50"})}),e[78]=V,e[79]=de,e[80]=S):S=e[80];let k;e[81]!==me?(k=t.jsx(Qe,{type:"file",accept:"image/*",onChange:me,className:"max-w-xs"}),e[81]=me,e[82]=k):k=e[82];let ee;e[83]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Format: JPG, PNG, GIF. Maks: 2MB."}),e[83]=ee):ee=e[83];let T;e[84]!==k?(T=t.jsxs("div",{className:"space-y-2",children:[k,ee]}),e[84]=k,e[85]=T):T=e[85];let E;e[86]!==S||e[87]!==T?(E=t.jsxs("div",{className:"space-y-2",children:[Z,t.jsxs("div",{className:"flex items-start gap-4",children:[S,T]})]}),e[86]=S,e[87]=T,e[88]=E):E=e[88];let Q;e[89]!==q||e[90]!==C||e[91]!==E?(Q=t.jsxs(be,{className:"border-primary/10 shadow-md",children:[Y,t.jsxs(je,{className:"space-y-4",children:[q,C,E]})]}),e[89]=q,e[90]=C,e[91]=E,e[92]=Q):Q=e[92];let te;e[93]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx(_e,{children:t.jsx(ye,{className:"text-lg",children:"Hint (Bantuan)"})}),e[93]=te):te=e[93];const pe=s.hint||"";let A;e[94]!==o?(A=l=>o("hint",l),e[94]=o,e[95]=A):A=e[95];let D;e[96]!==pe||e[97]!==A?(D=t.jsxs(be,{className:"border-primary/10 shadow-md",children:[te,t.jsx(je,{className:"space-y-4",children:t.jsx(ve,{value:pe,onChange:A,placeholder:"Tuliskan hint atau bantuan untuk siswa di sini (opsional)...",className:"min-h-[80px]"})})]}),e[96]=pe,e[97]=A,e[98]=D):D=e[98];let L;e[99]!==o?(L=l=>o("options",l),e[99]=o,e[100]=L):L=e[100];let M;e[101]!==s.options||e[102]!==s.question_type||e[103]!==r||e[104]!==L?(M=t.jsx(Be,{type:s.question_type,options:s.options,onChange:L,errors:r}),e[101]=s.options,e[102]=s.question_type,e[103]=r,e[104]=L,e[105]=M):M=e[105];let O;e[106]!==w||e[107]!==Q||e[108]!==D||e[109]!==M?(O=t.jsxs("div",{className:"flex-1 overflow-auto p-6 space-y-6 max-w-5xl mx-auto w-full",children:[w,Q,D,M]}),e[106]=w,e[107]=Q,e[108]=D,e[109]=M,e[110]=O):O=e[110];let se;return e[111]!==m||e[112]!==g||e[113]!==O?(se=t.jsxs("div",{className:"min-h-screen bg-muted/40 flex flex-col",children:[m,g,O]}),e[111]=m,e[112]=g,e[113]=O,e[114]=se):se=e[114],se}function Je(n){return n.is_correct}function Xe(n){return n.content&&n.content.trim()!==""}function We(n){return{...n,media_file:null,delete_media:!1}}export{Ot as default};
