import{c as ke,r as ue,j as t,b as n,H as Te}from"./app-BL23_ioL.js";import{A as Ae}from"./app-layout-CDpq751G.js";import{b as le,c as ie,C as re,a as ae,d as De}from"./card-BPYLlYs-.js";import{B as be}from"./badge-J0MIFrA3.js";import{b as je,e as a,a as Ee,c as B,T as Me,d as He}from"./table-DCctSBnV.js";import{B as i}from"./button-ErPUhfKM.js";import{a as ve}from"./index-63p2o9N5.js";import{E as Le}from"./ExamController-DtW2Bo6_.js";import{RecalculateScoreDialog as Re}from"./recalculate-score-dialog-DecBABdv.js";import{A as $e}from"./arrow-left-DtOF6xQY.js";import{D as Be}from"./download-LHYMOdt-.js";import{R as ne}from"./refresh-cw-5teAx7Zi.js";import{C as Fe}from"./circle-check-big-Y3jfL0jT.js";import{f as Ne}from"./format-BOcL19nD.js";/* empty css            */import"./app-sidebar-layout-BQteZuDl.js";import"./app-shell-jJUctm17.js";import"./sheet-CAKOvksQ.js";import"./index-CuzgK42c.js";import"./index-DuTHxAZ2.js";import"./index-DFAfDP5U.js";import"./index-BoQRUedT.js";import"./x-Bvzm8Mbo.js";import"./index-CneOgjps.js";import"./index-Uqd2XL9l.js";import"./dropdown-menu-CNt4bR-q.js";import"./index-CQgWKaQN.js";import"./index-e0nZHYEA.js";import"./index-CCL8Hooa.js";import"./index-63gOiuA7.js";import"./index-DW9AIAM8.js";import"./settings-xNbhH6pj.js";import"./index-CO7HXDK1.js";import"./app-logo-icon-Cc_kpyVd.js";import"./users-BFSadU9h.js";import"./calendar-DOhSzEfG.js";import"./index-C3I_bb3G.js";import"./dialog-CUguBIrB.js";import"./checkbox-BB3F9eKw.js";import"./index-BzB_uvRg.js";import"./label-CDDyI8HS.js";import"./spinner-Cvp-W3pQ.js";import"./loader-circle-CRbCYMqs.js";import"./toDate-DPY-_nel.js";function Dt(ye){const e=ke.c(93),{exam:s,sessions:r,total_students:Se,participated_count:oe}=ye;let F;e[0]===Symbol.for("react.memo_cache_sentinel")?(F=[{title:"Exam Management",href:ve.url()},{title:"Monitor",href:"#"}],e[0]=F):F=e[0];const we=F;let z;e[1]===Symbol.for("react.memo_cache_sentinel")?(z=new Date,e[1]=z):z=e[1];const[me,Ce]=ue.useState(z),[I,ge]=ue.useState(!1);let P;e[2]===Symbol.for("react.memo_cache_sentinel")?(P=()=>{ge(!0),n.reload({only:["sessions","participated_count"],onFinish:()=>{ge(!1),Ce(new Date)}})},e[2]=P):P=e[2];const _e=P;let U,K;e[3]===Symbol.for("react.memo_cache_sentinel")?(U=()=>{const l=setInterval(_e,3e4);return()=>clearInterval(l)},K=[],e[3]=U,e[4]=K):(U=e[3],K=e[4]),ue.useEffect(U,K);const ce=`Monitor - ${s.title}`;let o;e[5]!==ce?(o=t.jsx(Te,{title:ce}),e[5]=ce,e[6]=o):o=e[6];let O;e[7]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx(i,{variant:"outline",size:"icon",onClick:ze,children:t.jsx($e,{className:"h-4 w-4"})}),e[7]=O):O=e[7];let m;e[8]!==s.title?(m=t.jsxs("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 dark:text-slate-100",children:["Monitor: ",s.title]}),e[8]=s.title,e[9]=m):m=e[9];let q;e[10]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx("p",{className:"text-muted-foreground font-medium",children:"Live tracking of student progress."}),e[10]=q):q=e[10];let c;e[11]!==m?(c=t.jsxs("div",{className:"flex items-center gap-4",children:[O,t.jsxs("div",{children:[m,q]})]}),e[11]=m,e[12]=c):c=e[12];let d;e[13]!==s.id?(d=()=>window.open(`/admin/exams/${s.id}/analysis/export`,"_blank"),e[13]=s.id,e[14]=d):d=e[14];let G;e[15]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsx(Be,{className:"mr-2 h-4 w-4"}),e[15]=G):G=e[15];let x;e[16]!==d?(x=t.jsxs(i,{variant:"outline",onClick:d,children:[G,"Download Excel"]}),e[16]=d,e[17]=x):x=e[17];let f;e[18]!==s.id?(f=()=>n.visit(`/admin/exams/${s.id}/live-score`),e[18]=s.id,e[19]=f):f=e[19];let J;e[20]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx(ne,{className:"mr-2 h-4 w-4"}),e[20]=J):J=e[20];let h;e[21]!==f?(h=t.jsxs(i,{className:"bg-indigo-600 hover:bg-indigo-700 text-white",onClick:f,children:[J,"Live Score"]}),e[21]=f,e[22]=h):h=e[22];let p;e[23]!==s.id?(p=t.jsx(i,{variant:"outline",onClick:()=>n.visit(`/admin/exams/${s.id}/analysis`),children:"Item Analysis"}),e[23]=s.id,e[24]=p):p=e[24];const de=`/admin/exams/${s.id}/recalculate-all`;let u;e[25]!==de?(u=t.jsx(Re,{actionUrl:de,triggerText:"Recalculate All Scores"}),e[25]=de,e[26]=u):u=e[26];let j;e[27]!==s.id?(j=t.jsx(i,{variant:"outline",onClick:()=>n.visit(`/admin/exams/${s.id}/manual-correction`),children:"Manual Correction"}),e[27]=s.id,e[28]=j):j=e[28];let g;e[29]!==s.id?(g=t.jsx(i,{onClick:()=>n.visit(Le.edit(s.id).url),children:"Edit Exam"}),e[29]=s.id,e[30]=g):g=e[30];let _;e[31]!==x||e[32]!==h||e[33]!==p||e[34]!==u||e[35]!==j||e[36]!==g?(_=t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[" ",x,h,p,u,j,g]}),e[31]=x,e[32]=h,e[33]=p,e[34]=u,e[35]=j,e[36]=g,e[37]=_):_=e[37];let b;e[38]!==c||e[39]!==_?(b=t.jsxs("div",{className:"flex flex-col gap-6",children:[" ",c,_]}),e[38]=c,e[39]=_,e[40]=b):b=e[40];let Q;e[41]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(ie,{className:"text-sm font-medium",children:"Participants"}),t.jsx(Fe,{className:"h-4 w-4 text-muted-foreground"})]}),e[41]=Q):Q=e[41];const xe=Se||"-";let N;e[42]!==oe||e[43]!==xe?(N=t.jsxs("div",{className:"text-2xl font-bold",children:[oe," / ",xe]}),e[42]=oe,e[43]=xe,e[44]=N):N=e[44];let V;e[45]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Students started"}),e[45]=V):V=e[45];let v;e[46]!==N?(v=t.jsxs(re,{children:[Q,t.jsxs(ae,{children:[N,V]})]}),e[46]=N,e[47]=v):v=e[47];let W;e[48]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(ie,{className:"text-sm font-medium",children:"Total Sessions"}),t.jsx(ne,{className:"h-4 w-4 text-muted-foreground"})]}),e[48]=W):W=e[48];let y;e[49]!==r.length?(y=t.jsx("div",{className:"text-2xl font-bold",children:r.length}),e[49]=r.length,e[50]=y):y=e[50];let X;e[51]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Accumulated attempts"}),e[51]=X):X=e[51];let S;e[52]!==y?(S=t.jsxs(re,{children:[W,t.jsxs(ae,{children:[y,X]})]}),e[52]=y,e[53]=S):S=e[53];let Y;e[54]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(ie,{className:"text-sm font-medium",children:"Max Attempts"}),t.jsx(ne,{className:"h-4 w-4 text-muted-foreground"})]}),e[54]=Y):Y=e[54];const fe=s.max_attempts||"∞";let w;e[55]!==fe?(w=t.jsx("div",{className:"text-2xl font-bold",children:fe}),e[55]=fe,e[56]=w):w=e[56];let Z;e[57]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Per student limit"}),e[57]=Z):Z=e[57];let C;e[58]!==w?(C=t.jsxs(re,{children:[Y,t.jsxs(ae,{children:[w,Z]})]}),e[58]=w,e[59]=C):C=e[59];let k;e[60]!==v||e[61]!==S||e[62]!==C?(k=t.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[v,S,C]}),e[60]=v,e[61]=S,e[62]=C,e[63]=k):k=e[63];let ee;e[64]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx(ie,{children:"Live Results"}),e[64]=ee):ee=e[64];let T;e[65]!==me?(T=me.toLocaleTimeString(),e[65]=me,e[66]=T):T=e[66];let A;e[67]!==T?(A=t.jsxs("div",{children:[ee,t.jsxs(De,{children:["Last updated: ",T]})]}),e[67]=T,e[68]=A):A=e[68];const he=`mr-2 h-4 w-4 ${I?"animate-spin":""}`;let D;e[69]!==he?(D=t.jsx(ne,{className:he}),e[69]=he,e[70]=D):D=e[70];let E;e[71]!==I||e[72]!==D?(E=t.jsxs(i,{variant:"outline",size:"sm",onClick:_e,disabled:I,children:[D,"Refresh"]}),e[71]=I,e[72]=D,e[73]=E):E=e[73];let M;e[74]!==A||e[75]!==E?(M=t.jsxs(le,{className:"flex flex-row items-center justify-between",children:[A,E]}),e[74]=A,e[75]=E,e[76]=M):M=e[76];let te;e[77]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx(Ee,{children:t.jsxs(je,{children:[t.jsx(B,{children:"Student"}),t.jsx(B,{children:"Status"}),t.jsx(B,{children:"Attempt"}),t.jsx(B,{children:"Start Time"}),t.jsx(B,{children:"Final Score"}),t.jsx(B,{className:"text-right",children:"Actions"})]})}),e[77]=te):te=e[77];let H;e[78]!==s.max_attempts||e[79]!==r?(H=r.length===0?t.jsx(je,{children:t.jsx(a,{colSpan:6,className:"text-center h-24 text-muted-foreground",children:"No students have started this exam yet."})}):r.map(l=>{const pe=l.user.exam_results&&l.user.exam_results.length>0?l.user.exam_results[0].final_score:l.final_score;return t.jsxs(je,{children:[t.jsx(a,{className:"font-medium",children:t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold",children:l.user.name}),t.jsx("div",{className:"text-xs text-muted-foreground",children:l.user.email})]})}),t.jsx(a,{children:l.is_finished?t.jsx(be,{variant:"secondary",className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Finished"}):t.jsx(be,{variant:"outline",className:"border-blue-200 text-blue-700 bg-blue-50",children:"Ongoing"})}),t.jsxs(a,{children:[t.jsxs("span",{className:"font-medium",children:["#",l.attempt_number]}),t.jsxs("span",{className:"text-muted-foreground text-xs",children:[" / ",s.max_attempts||"∞"]})]}),t.jsxs(a,{children:[l.start_time?Ne(new Date(l.start_time),"MMM d, HH:mm"):"-",l.finish_time&&t.jsxs("div",{className:"text-xs text-muted-foreground",children:["Finished: ",Ne(new Date(l.finish_time),"HH:mm")]})]}),t.jsx(a,{children:pe!=null?t.jsx("span",{className:"font-bold",children:pe}):t.jsx("span",{className:"text-muted-foreground",children:"-"})}),t.jsx(a,{className:"text-right",children:l.is_finished&&t.jsx(i,{variant:"outline",size:"sm",onClick:()=>n.visit(`/admin/exams/sessions/${l.id}/correction`),children:"Koreksi"})})]},l.id)}),e[78]=s.max_attempts,e[79]=r,e[80]=H):H=e[80];let L;e[81]!==H?(L=t.jsx(ae,{children:t.jsx("div",{className:"rounded-md border",children:t.jsxs(Me,{className:"min-w-[800px]",children:[te,t.jsx(He,{children:H})]})})}),e[81]=H,e[82]=L):L=e[82];let R;e[83]!==M||e[84]!==L?(R=t.jsxs(re,{children:[M,L]}),e[83]=M,e[84]=L,e[85]=R):R=e[85];let $;e[86]!==b||e[87]!==k||e[88]!==R?($=t.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[b,k,R]}),e[86]=b,e[87]=k,e[88]=R,e[89]=$):$=e[89];let se;return e[90]!==$||e[91]!==o?(se=t.jsxs(Ae,{breadcrumbs:we,children:[o,$]}),e[90]=$,e[91]=o,e[92]=se):se=e[92],se}function ze(){return n.visit(ve.url())}export{Dt as default};
