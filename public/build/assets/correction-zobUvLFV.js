import{r as p,j as n,c as M,H as re,b as ne}from"./app-BL23_ioL.js";import{A as le}from"./app-layout-CDpq751G.js";import{a as G,B as ce}from"./button-ErPUhfKM.js";import{u as me,c as de,P as ue,a as L}from"./index-DuTHxAZ2.js";import{c as H,R as fe,I as pe}from"./index-e0nZHYEA.js";import{P as k}from"./index-BoQRUedT.js";import{u as xe}from"./index-CQgWKaQN.js";import{u as ge}from"./index-DFAfDP5U.js";import{a as be}from"./index-63p2o9N5.js";import{E as K}from"./ExamController-DtW2Bo6_.js";import{RecalculateScoreDialog as ve}from"./recalculate-score-dialog-DecBABdv.js";import{E as he}from"./exam-result-view-BXUGEdsH.js";import{A as Ne}from"./arrow-left-DtOF6xQY.js";/* empty css            */import"./app-sidebar-layout-BQteZuDl.js";import"./app-shell-jJUctm17.js";import"./sheet-CAKOvksQ.js";import"./index-CuzgK42c.js";import"./x-Bvzm8Mbo.js";import"./index-CneOgjps.js";import"./index-Uqd2XL9l.js";import"./dropdown-menu-CNt4bR-q.js";import"./index-CCL8Hooa.js";import"./index-63gOiuA7.js";import"./index-DW9AIAM8.js";import"./settings-xNbhH6pj.js";import"./index-CO7HXDK1.js";import"./app-logo-icon-Cc_kpyVd.js";import"./users-BFSadU9h.js";import"./calendar-DOhSzEfG.js";import"./index-C3I_bb3G.js";import"./dialog-CUguBIrB.js";import"./checkbox-BB3F9eKw.js";import"./index-BzB_uvRg.js";import"./label-CDDyI8HS.js";import"./spinner-Cvp-W3pQ.js";import"./loader-circle-CRbCYMqs.js";import"./card-BPYLlYs-.js";import"./badge-J0MIFrA3.js";import"./table-DCctSBnV.js";import"./PreviewStudentAnswer-DcXJbsRy.js";import"./MathRenderer-Dmg9cVUs.js";import"./circle-check-DAVIKFey.js";import"./circle-x-Du51Wy4n.js";import"./square-DDqxBGSL.js";import"./square-check-big-CfvcNerE.js";import"./style-CnmbGnv_.js";import"./RichTextEditor-BBqXt6Vd.js";import"./input-CZPc4iR6.js";import"./index-CeanCvta.js";import"./chart-column-Bi0D10bt.js";import"./circle-check-big-Y3jfL0jT.js";import"./circle-help-CCCDOPCk.js";var F="Tabs",[_e,Rt]=de(F,[H]),q=H(),[je,B]=_e(F),z=p.forwardRef((s,e)=>{const{__scopeTabs:t,value:i,onValueChange:a,defaultValue:o,orientation:r="horizontal",dir:m,activationMode:f="automatic",...u}=s,c=xe(m),[l,d]=me({prop:i,onChange:a,defaultProp:o??"",caller:F});return n.jsx(je,{scope:t,baseId:ge(),value:l,onValueChange:d,orientation:r,dir:c,activationMode:f,children:n.jsx(k.div,{dir:c,"data-orientation":r,...u,ref:e})})});z.displayName=F;var O="TabsList",U=p.forwardRef((s,e)=>{const{__scopeTabs:t,loop:i=!0,...a}=s,o=B(O,t),r=q(t);return n.jsx(fe,{asChild:!0,...r,orientation:o.orientation,dir:o.dir,loop:i,children:n.jsx(k.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:e})})});U.displayName=O;var J="TabsTrigger",Q=p.forwardRef((s,e)=>{const{__scopeTabs:t,value:i,disabled:a=!1,...o}=s,r=B(J,t),m=q(t),f=Y(r.baseId,i),u=Z(r.baseId,i),c=i===r.value;return n.jsx(pe,{asChild:!0,...m,focusable:!a,active:c,children:n.jsx(k.button,{type:"button",role:"tab","aria-selected":c,"aria-controls":u,"data-state":c?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:f,...o,ref:e,onMouseDown:L(s.onMouseDown,l=>{!a&&l.button===0&&l.ctrlKey===!1?r.onValueChange(i):l.preventDefault()}),onKeyDown:L(s.onKeyDown,l=>{[" ","Enter"].includes(l.key)&&r.onValueChange(i)}),onFocus:L(s.onFocus,()=>{const l=r.activationMode!=="manual";!c&&!a&&l&&r.onValueChange(i)})})})});Q.displayName=J;var W="TabsContent",X=p.forwardRef((s,e)=>{const{__scopeTabs:t,value:i,forceMount:a,children:o,...r}=s,m=B(W,t),f=Y(m.baseId,i),u=Z(m.baseId,i),c=i===m.value,l=p.useRef(c);return p.useEffect(()=>{const d=requestAnimationFrame(()=>l.current=!1);return()=>cancelAnimationFrame(d)},[]),n.jsx(ue,{present:a||c,children:({present:d})=>n.jsx(k.div,{"data-state":c?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":f,hidden:!d,id:u,tabIndex:0,...r,ref:e,style:{...s.style,animationDuration:l.current?"0s":void 0},children:d&&o})})});X.displayName=W;function Y(s,e){return`${s}-trigger-${e}`}function Z(s,e){return`${s}-content-${e}`}var ye=z,ee=U,te=Q,se=X;const Te=ye,ie=p.forwardRef((s,e)=>{const t=M.c(9);let i,a;t[0]!==s?({className:i,...a}=s,t[0]=s,t[1]=i,t[2]=a):(i=t[1],a=t[2]);let o;t[3]!==i?(o=G("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",i),t[3]=i,t[4]=o):o=t[4];let r;return t[5]!==a||t[6]!==e||t[7]!==o?(r=n.jsx(ee,{ref:e,className:o,...a}),t[5]=a,t[6]=e,t[7]=o,t[8]=r):r=t[8],r});ie.displayName=ee.displayName;const ae=p.forwardRef((s,e)=>{const t=M.c(9);let i,a;t[0]!==s?({className:i,...a}=s,t[0]=s,t[1]=i,t[2]=a):(i=t[1],a=t[2]);let o;t[3]!==i?(o=G("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",i),t[3]=i,t[4]=o):o=t[4];let r;return t[5]!==a||t[6]!==e||t[7]!==o?(r=n.jsx(te,{ref:e,className:o,...a}),t[5]=a,t[6]=e,t[7]=o,t[8]=r):r=t[8],r});ae.displayName=te.displayName;const oe=p.forwardRef((s,e)=>{const t=M.c(9);let i,a;t[0]!==s?({className:i,...a}=s,t[0]=s,t[1]=i,t[2]=a):(i=t[1],a=t[2]);let o;t[3]!==i?(o=G("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",i),t[3]=i,t[4]=o):o=t[4];let r;return t[5]!==a||t[6]!==e||t[7]!==o?(r=n.jsx(se,{ref:e,className:o,...a}),t[5]=a,t[6]=e,t[7]=o,t[8]=r):r=t[8],r});oe.displayName=se.displayName;function St(s){const e=M.c(55),{session:t,all_sessions:i,analysis:a,norm_reference:o,leaderboard:r,questions:m,total_score:f}=s;let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u={title:"Exam Management",href:be.url()},e[0]=u):u=e[0];const c=`/admin/exams/${t.exam_id}/monitor`;let l;e[1]!==c?(l={title:"Monitor",href:c},e[1]=c,e[2]=l):l=e[2];let d;e[3]===Symbol.for("react.memo_cache_sentinel")?(d={title:"Correction",href:"#"},e[3]=d):d=e[3];let I;e[4]!==l?(I=[u,l,d],e[4]=l,e[5]=I):I=e[5];const V=I,D=`Correction - ${t.user.name}`;let x;e[6]!==D?(x=n.jsx(re,{title:D}),e[6]=D,e[7]=x):x=e[7];let P;e[8]===Symbol.for("react.memo_cache_sentinel")?(P=n.jsx(ce,{variant:"outline",size:"icon",onClick:Re,children:n.jsx(Ne,{className:"h-4 w-4"})}),e[8]=P):P=e[8];let g;e[9]!==t.user.name?(g=n.jsxs("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 dark:text-slate-100",children:["Correction: ",t.user.name]}),e[9]=t.user.name,e[10]=g):g=e[10];let b;e[11]!==t.exam.title?(b=n.jsxs("p",{className:"text-muted-foreground font-medium",children:["Review and grade student answers for ",t.exam.title,"."]}),e[11]=t.exam.title,e[12]=b):b=e[12];let v;e[13]!==b||e[14]!==g?(v=n.jsxs("div",{className:"flex-1",children:[g,b]}),e[13]=b,e[14]=g,e[15]=v):v=e[15];let h;e[16]!==t.id?(h=K.calculateScores(t.id),e[16]=t.id,e[17]=h):h=e[17];let N;e[18]!==h?(N=n.jsx(ve,{actionUrl:h}),e[18]=h,e[19]=N):N=e[19];let _;e[20]!==v||e[21]!==N?(_=n.jsxs("div",{className:"flex items-center gap-4",children:[P,v,N]}),e[20]=v,e[21]=N,e[22]=_):_=e[22];let j;e[23]!==t.id?(j=t.id.toString(),e[23]=t.id,e[24]=j):j=e[24];let y;e[25]!==i||e[26]!==t?(y=i||[t],e[25]=i,e[26]=t,e[27]=y):y=e[27];let T;e[28]!==y?(T=y.map(we),e[28]=y,e[29]=T):T=e[29];let w;e[30]!==T?(w=n.jsx("div",{className:"w-full overflow-x-auto pb-2",children:n.jsx(ie,{className:"w-full flex h-auto p-1 bg-muted/40 rounded-lg justify-start gap-2",children:T})}),e[30]=T,e[31]=w):w=e[31];let C;e[32]!==t.id?(C=t.id.toString(),e[32]=t.id,e[33]=C):C=e[33];let R;e[34]!==a||e[35]!==r||e[36]!==o||e[37]!==m||e[38]!==t||e[39]!==f?(R=n.jsx(he,{exam:t.exam,session:t,questions:m,total_score:f,analysis:a,norm_reference:o,leaderboard:r}),e[34]=a,e[35]=r,e[36]=o,e[37]=m,e[38]=t,e[39]=f,e[40]=R):R=e[40];let S;e[41]!==C||e[42]!==R?(S=n.jsx(oe,{value:C,className:"mt-6",children:R}),e[41]=C,e[42]=R,e[43]=S):S=e[43];let A;e[44]!==j||e[45]!==w||e[46]!==S?(A=n.jsxs(Te,{value:j,onValueChange:Ce,className:"w-full",children:[w,S]}),e[44]=j,e[45]=w,e[46]=S,e[47]=A):A=e[47];let E;e[48]!==_||e[49]!==A?(E=n.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[_,A]}),e[48]=_,e[49]=A,e[50]=E):E=e[50];let $;return e[51]!==V||e[52]!==E||e[53]!==x?($=n.jsxs(le,{breadcrumbs:V,children:[x,E]}),e[51]=V,e[52]=E,e[53]=x,e[54]=$):$=e[54],$}function we(s){return n.jsxs(ae,{value:s.id.toString(),className:"flex flex-col items-start gap-1 py-2 px-4 h-auto data-[state=active]:bg-white data-[state=active]:shadow-sm rounded-md transition-all",children:[n.jsxs("span",{className:"font-semibold",children:["Attempt #",s.attempt_number]}),n.jsxs("div",{className:"flex items-center gap-2",children:[s.is_finished?n.jsxs("span",{className:"text-[10px] text-muted-foreground bg-green-100 text-green-800 px-1.5 py-0.5 rounded-full",children:["Score: ",s.exam_result?.final_score!=null?s.exam_result.final_score:s.final_score!=null?s.final_score:"-"]}):n.jsx("span",{className:"text-[10px] text-muted-foreground bg-blue-100 text-blue-800 px-1.5 py-0.5 rounded-full",children:"Ongoing"}),n.jsx("span",{className:"text-[10px] text-muted-foreground",children:s.exam_result?.is_passed?"Passed":s.is_finished?"Failed":"Active"})]})]},s.id)}function Ce(s){return ne.visit(K.correction({session:s}).url)}function Re(){return window.history.back()}export{St as default};
