import{c as me,r as F,j as s,b as le}from"./app-DyN-wpxS.js";import{a as ve,e as ke,C as Se,b as Ne}from"./card-C6hf_ydR.js";import{B as de}from"./badge-DvMEEYXx.js";import{c as Ce,B as O,a as b}from"./button-CdyPjVIa.js";import{A as Ae,a as _e}from"./avatar-Dxh06ktP.js";import{b as qe,c as we,d as Te,e as Ee,f as De}from"./dialog-Y5ccQPmd.js";import{q as R,a as X}from"./index-DW9AIAM8.js";import{L as ue}from"./label-DLKOY3Rp.js";import{R as Fe}from"./RichTextEditor-DBZWqaZR.js";import{T as Qe}from"./textarea-nVpaP2SM.js";import{C as Pe}from"./circle-check-VDgprh3j.js";import{C as Be}from"./circle-x-BqcflfMS.js";import{C as Ie}from"./circle-alert-Brz_dMHK.js";import{T as Le}from"./trash-2-DUuu_oLz.js";import{X as Ue}from"./x-lNOBUcxD.js";import{C as $e}from"./index-pm4w21PO.js";import{C as ze}from"./select-UBe8Lx71.js";import{C as Oe}from"./chevron-down-DNehCCXA.js";import{C as Re}from"./clock-D52EKvNA.js";const He=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Ke=Ce("Pencil",He),a=t=>({url:a.url(t),method:"get"});a.definition={methods:["get","head"],url:"/admin/question-suggestions"};a.url=t=>a.definition.url+R(t);a.get=t=>({url:a.url(t),method:"get"});a.head=t=>({url:a.url(t),method:"head"});const ce=t=>({action:a.url(t),method:"get"});ce.get=t=>({action:a.url(t),method:"get"});ce.head=t=>({action:a.url({[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});a.form=ce;const x=(t,e)=>({url:x.url(t,e),method:"post"});x.definition={methods:["post"],url:"/admin/questions/{question}/suggestions"};x.url=(t,e)=>{(typeof t=="string"||typeof t=="number")&&(t={question:t}),typeof t=="object"&&!Array.isArray(t)&&"id"in t&&(t={question:t.id}),Array.isArray(t)&&(t={question:t[0]}),t=X(t);const r={question:typeof t.question=="object"?t.question.id:t.question};return x.definition.url.replace("{question}",r.question.toString()).replace(/\/+$/,"")+R(e)};x.post=(t,e)=>({url:x.url(t,e),method:"post"});const pe=(t,e)=>({action:x.url(t,e),method:"post"});pe.post=(t,e)=>({action:x.url(t,e),method:"post"});x.form=pe;const y=(t,e)=>({url:y.url(t,e),method:"put"});y.definition={methods:["put"],url:"/admin/question-suggestions/{suggestion}"};y.url=(t,e)=>{(typeof t=="string"||typeof t=="number")&&(t={suggestion:t}),typeof t=="object"&&!Array.isArray(t)&&"id"in t&&(t={suggestion:t.id}),Array.isArray(t)&&(t={suggestion:t[0]}),t=X(t);const r={suggestion:typeof t.suggestion=="object"?t.suggestion.id:t.suggestion};return y.definition.url.replace("{suggestion}",r.suggestion.toString()).replace(/\/+$/,"")+R(e)};y.put=(t,e)=>({url:y.url(t,e),method:"put"});const ge=(t,e)=>({action:y.url(t,{[e?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...e?.query??e?.mergeQuery??{}}}),method:"post"});ge.put=(t,e)=>({action:y.url(t,{[e?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...e?.query??e?.mergeQuery??{}}}),method:"post"});y.form=ge;const j=(t,e)=>({url:j.url(t,e),method:"delete"});j.definition={methods:["delete"],url:"/admin/question-suggestions/{suggestion}"};j.url=(t,e)=>{(typeof t=="string"||typeof t=="number")&&(t={suggestion:t}),typeof t=="object"&&!Array.isArray(t)&&"id"in t&&(t={suggestion:t.id}),Array.isArray(t)&&(t={suggestion:t[0]}),t=X(t);const r={suggestion:typeof t.suggestion=="object"?t.suggestion.id:t.suggestion};return j.definition.url.replace("{suggestion}",r.suggestion.toString()).replace(/\/+$/,"")+R(e)};j.delete=(t,e)=>({url:j.url(t,e),method:"delete"});const fe=(t,e)=>({action:j.url(t,{[e?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...e?.query??e?.mergeQuery??{}}}),method:"post"});fe.delete=(t,e)=>({action:j.url(t,{[e?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...e?.query??e?.mergeQuery??{}}}),method:"post"});j.form=fe;const v=(t,e)=>({url:v.url(t,e),method:"post"});v.definition={methods:["post"],url:"/admin/question-suggestions/{suggestion}/approve"};v.url=(t,e)=>{(typeof t=="string"||typeof t=="number")&&(t={suggestion:t}),typeof t=="object"&&!Array.isArray(t)&&"id"in t&&(t={suggestion:t.id}),Array.isArray(t)&&(t={suggestion:t[0]}),t=X(t);const r={suggestion:typeof t.suggestion=="object"?t.suggestion.id:t.suggestion};return v.definition.url.replace("{suggestion}",r.suggestion.toString()).replace(/\/+$/,"")+R(e)};v.post=(t,e)=>({url:v.url(t,e),method:"post"});const he=(t,e)=>({action:v.url(t,e),method:"post"});he.post=(t,e)=>({action:v.url(t,e),method:"post"});v.form=he;const k=(t,e)=>({url:k.url(t,e),method:"post"});k.definition={methods:["post"],url:"/admin/question-suggestions/{suggestion}/reject"};k.url=(t,e)=>{(typeof t=="string"||typeof t=="number")&&(t={suggestion:t}),typeof t=="object"&&!Array.isArray(t)&&"id"in t&&(t={suggestion:t.id}),Array.isArray(t)&&(t={suggestion:t[0]}),t=X(t);const r={suggestion:typeof t.suggestion=="object"?t.suggestion.id:t.suggestion};return k.definition.url.replace("{suggestion}",r.suggestion.toString()).replace(/\/+$/,"")+R(e)};k.post=(t,e)=>({url:k.url(t,e),method:"post"});const be=(t,e)=>({action:k.url(t,e),method:"post"});be.post=(t,e)=>({action:k.url(t,e),method:"post"});k.form=be;const re={index:a,store:x,update:y,destroy:j,approve:v,reject:k};function Me(t){const e=me.c(28),{initialData:r,onSubmit:Q,onCancel:S,isProcessing:J}=t,n=J===void 0?!1:J,[p,H]=F.useState(r.description||""),[g,P]=F.useState(r.content);let o;e[0]!==r.options?(o=r.options||[],e[0]=r.options,e[1]=o):o=e[1];const[K]=F.useState(o);let N;e[2]===Symbol.for("react.memo_cache_sentinel")?(N={},e[2]=N):N=e[2],F.useState(N);let M;e[3]!==g||e[4]!==p||e[5]!==Q||e[6]!==K?(M=h=>{h.preventDefault(),Q({description:p,content:g,options:K})},e[3]=g,e[4]=p,e[5]=Q,e[6]=K,e[7]=M):M=e[7];const q=M;let C;e[8]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx(ue,{children:"Alasan / Deskripsi Saran"}),e[8]=C):C=e[8];let w;e[9]===Symbol.for("react.memo_cache_sentinel")?(w=h=>H(h.target.value),e[9]=w):w=e[9];let A;e[10]!==p?(A=s.jsxs("div",{className:"space-y-2",children:[C,s.jsx(Qe,{value:p,onChange:w,placeholder:"Jelaskan alasan saran perubahan ini...",className:"min-h-[80px]"})]}),e[10]=p,e[11]=A):A=e[11];let _;e[12]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(ue,{children:"Usulan Konten Soal"}),e[12]=_):_=e[12];let l;e[13]!==g?(l=s.jsxs("div",{className:"space-y-2",children:[_,s.jsx(Fe,{value:g,onChange:P,placeholder:"Tuliskan usulan perbaikan soal...",className:"min-h-[100px]"})]}),e[13]=g,e[14]=l):l=e[14];let u;e[15]!==n||e[16]!==S?(u=s.jsx(O,{type:"button",variant:"outline",onClick:S,disabled:n,children:"Batal"}),e[15]=n,e[16]=S,e[17]=u):u=e[17];let f;e[18]!==n?(f=s.jsx(O,{type:"submit",disabled:n,children:"Simpan Saran"}),e[18]=n,e[19]=f):f=e[19];let i;e[20]!==u||e[21]!==f?(i=s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[u,f]}),e[20]=u,e[21]=f,e[22]=i):i=e[22];let m;return e[23]!==q||e[24]!==i||e[25]!==A||e[26]!==l?(m=s.jsxs("form",{onSubmit:q,className:"space-y-6",children:[A,l,i]}),e[23]=q,e[24]=i,e[25]=A,e[26]=l,e[27]=m):m=e[27],m}function mt(t){const e=me.c(65),{suggestion:r,isOwner:Q,currentUserId:S}=t,J=Q===void 0?!1:Q,n=r.state==="pending",p=r.state==="approved",H=r.state==="rejected",[g,P]=F.useState(!1),[o,K]=F.useState(n);let N;e[0]!==S||e[1]!==r.user.id||e[2]!==r.user_id?(N=S!=null&&(r.user_id&&r.user_id.toString()===S.toString()||r.user?.id&&r.user.id.toString()===S.toString()),e[0]=S,e[1]=r.user.id,e[2]=r.user_id,e[3]=N):N=e[3];const q=N&&n,C=J&&n,[w,A]=F.useState(!1);let _;e[4]!==r.id?(_=d=>{if(confirm(`Apakah anda yakin ingin ${{approve:"menyetujui",reject:"menolak",delete:"menghapus"}[d]} saran ini?`))if(d==="delete")le.delete(re.destroy(r.id).url,{preserveScroll:!0});else{const E=d==="approve"?re.approve(r.id).url:re.reject(r.id).url;le.post(E,{},{preserveScroll:!0,onSuccess:()=>{d==="approve"&&window.location.reload()}})}},e[4]=r.id,e[5]=_):_=e[5];const l=_;let u;e[6]!==r.id?(u=d=>{le.put(re.update(r.id).url,{description:d.description,content:d.content,data:{content:d.content,options:d.options}},{onStart:()=>A(!0),onFinish:()=>A(!1),onSuccess:()=>P(!1),preserveScroll:!0})},e[6]=r.id,e[7]=u):u=e[7];const f=u;let i,m,h,T,B;if(e[8]!==C||e[9]!==q||e[10]!==l||e[11]!==p||e[12]!==o||e[13]!==n||e[14]!==H||e[15]!==r.created_at||e[16]!==r.data||e[17]!==r.description||e[18]!==r.question?.question_type||e[19]!==r.state||e[20]!==r.user.name){const d={pending:{card:"border-amber-200 dark:border-amber-800 bg-amber-50/50 dark:bg-amber-950/10",avatarBorder:"border-amber-200",avatarFallback:"bg-amber-100 text-amber-700",headerText:"text-amber-900 dark:text-amber-100",subtext:"text-amber-700 dark:text-amber-300",badge:"bg-amber-100 text-amber-800 border-amber-200",contentBg:"border-amber-100 dark:border-amber-900/50",titleIcon:"text-amber-600",footer:"bg-amber-100/50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800"},approved:{card:"border-green-200 dark:border-green-800 bg-green-50/50 dark:bg-green-950/10",avatarBorder:"border-green-200",avatarFallback:"bg-green-100 text-green-700",headerText:"text-green-900 dark:text-green-100",subtext:"text-green-700 dark:text-green-300",badge:"bg-green-100 text-green-800 border-green-200",contentBg:"border-green-100 dark:border-green-900/50",titleIcon:"text-green-600",footer:"bg-green-100/50 dark:bg-green-900/20 border-green-200 dark:border-green-800"},rejected:{card:"border-red-200 dark:border-red-800 bg-red-50/50 dark:bg-red-950/10",avatarBorder:"border-red-200",avatarFallback:"bg-red-100 text-red-700",headerText:"text-red-900 dark:text-red-100",subtext:"text-red-700 dark:text-red-300",badge:"bg-red-100 text-red-800 border-red-200",contentBg:"border-red-100 dark:border-red-900/50",titleIcon:"text-red-600",footer:"bg-red-100/50 dark:bg-red-900/20 border-red-200 dark:border-red-800"}},c=d[r.state]||d.pending;m=r.question?.question_type||"multiple_choice",i=Se,h=b("flex flex-col transition-all duration-200",c.card,o?"h-full":"h-auto");let E;e[26]!==o?(E=()=>K(!o),e[26]=o,e[27]=E):E=e[27];let Y;e[28]!==o?(Y=o?s.jsx(ze,{className:"w-4 h-4 text-muted-foreground"}):s.jsx(Oe,{className:"w-4 h-4 text-muted-foreground"}),e[28]=o,e[29]=Y):Y=e[29];const xe=b("h-8 w-8 border",c.avatarBorder),ye=b("text-xs",c.avatarFallback);let Z;e[30]!==r.user.name?(Z=r.user.name.charAt(0),e[30]=r.user.name,e[31]=Z):Z=e[31];const je=b("text-xs flex items-center gap-1",c.subtext);let ee;e[32]===Symbol.for("react.memo_cache_sentinel")?(ee=s.jsx(Re,{className:"w-3 h-3"}),e[32]=ee):ee=e[32];let te;e[33]!==r.created_at?(te=new Date(r.created_at).toLocaleDateString(),e[33]=r.created_at,e[34]=te):te=e[34];const oe=s.jsxs("div",{className:"flex items-center gap-2",children:[Y,s.jsx(Ae,{className:xe,children:s.jsx(_e,{className:ye,children:Z})}),s.jsxs("div",{children:[s.jsx("div",{className:b("text-sm font-semibold",c.headerText),children:r.user.name}),s.jsxs("div",{className:je,children:[ee,te]})]})]}),ne=n&&s.jsx(de,{variant:"outline",className:c.badge,children:"Saran"}),ie=p&&s.jsxs(de,{variant:"outline",className:b("gap-1 pr-3",c.badge),children:[s.jsx(Pe,{className:"w-3 h-3"}),"Diterima"]}),ae=H&&s.jsxs(de,{variant:"outline",className:b("gap-1 pr-3",c.badge),children:[s.jsx(Be,{className:"w-3 h-3"}),"Ditolak"]});let z;e[35]!==oe||e[36]!==ne||e[37]!==ie||e[38]!==ae?(z=s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[oe,ne,ie,ae]}),e[35]=oe,e[36]=ne,e[37]=ie,e[38]=ae,e[39]=z):z=e[39],e[40]!==z||e[41]!==E?(T=s.jsx(Ne,{className:"p-4 pb-2 cursor-pointer hover:bg-black/5 dark:hover:bg-white/5 transition-colors rounded-t-lg",onClick:E,children:z}),e[40]=z,e[41]=E,e[42]=T):T=e[42],B=o&&s.jsxs(s.Fragment,{children:[s.jsxs(ve,{className:"p-4 flex-1 space-y-4 animate-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{className:b("bg-white dark:bg-slate-950 rounded-lg p-3 border text-sm shadow-sm",c.contentBg),children:[s.jsxs("div",{className:b("flex items-start gap-2 mb-1 font-medium text-xs uppercase tracking-wider",c.titleIcon),children:[s.jsx(Ie,{className:"w-3 h-3 mt-0.5"}),"Alasan"]}),s.jsx("p",{className:"text-muted-foreground",children:r.description})]}),r.data?.content&&s.jsx("div",{className:"space-y-4 border rounded-md p-3 bg-white/50 dark:bg-black/5",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium text-muted-foreground uppercase mb-2",children:"Usulan Konten Baru"}),s.jsx("div",{className:"bg-white dark:bg-slate-950 rounded-md border p-3 max-h-[200px] overflow-y-auto custom-scrollbar",children:s.jsx("div",{className:"prose prose-sm max-w-none dark:prose-invert",dangerouslySetInnerHTML:{__html:r.data.content}})})]})})]}),(q||C)&&s.jsx(ke,{className:b("p-3 flex justify-end gap-2 border-t mt-auto",c.footer),children:s.jsxs("div",{className:"flex gap-2 w-full",children:[q&&s.jsxs(s.Fragment,{children:[s.jsx(O,{size:"sm",variant:"ghost",className:"text-muted-foreground hover:text-red-500 hover:bg-red-50",onClick:D=>{D.stopPropagation(),l("delete")},title:"Hapus Saran",children:s.jsx(Le,{className:"w-4 h-4"})}),s.jsx(O,{size:"sm",variant:"ghost",className:"text-muted-foreground hover:text-blue-500 hover:bg-blue-50",onClick:D=>{D.stopPropagation(),P(!0)},title:"Edit Saran",children:s.jsx(Ke,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"flex-1"}),C&&s.jsxs(s.Fragment,{children:[s.jsxs(O,{size:"sm",variant:"destructive",className:"h-8",onClick:D=>{D.stopPropagation(),l("reject")},children:[s.jsx(Ue,{className:"w-4 h-4 mr-1"}),"Tolak"]}),s.jsxs(O,{size:"sm",className:"bg-green-600 hover:bg-green-700 h-8",onClick:D=>{D.stopPropagation(),l("approve")},children:[s.jsx($e,{className:"w-4 h-4 mr-1"}),"Terima"]})]})]})})]}),e[8]=C,e[9]=q,e[10]=l,e[11]=p,e[12]=o,e[13]=n,e[14]=H,e[15]=r.created_at,e[16]=r.data,e[17]=r.description,e[18]=r.question?.question_type,e[19]=r.state,e[20]=r.user.name,e[21]=i,e[22]=m,e[23]=h,e[24]=T,e[25]=B}else i=e[21],m=e[22],h=e[23],T=e[24],B=e[25];let G;e[43]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsxs(qe,{children:[s.jsx(we,{children:"Edit Saran Perubahan"}),s.jsx(Te,{children:"Ubah detail saran sebelum menyetujui atau menolak."})]}),e[43]=G):G=e[43];const se=r.data?.content||"";let I;e[44]!==r.data?.options?(I=r.data?.options||[],e[44]=r.data?.options,e[45]=I):I=e[45];let L;e[46]!==r.description||e[47]!==I||e[48]!==se?(L={description:r.description,content:se,options:I},e[46]=r.description,e[47]=I,e[48]=se,e[49]=L):L=e[49];let V;e[50]===Symbol.for("react.memo_cache_sentinel")?(V=()=>P(!1),e[50]=V):V=e[50];let U;e[51]!==f||e[52]!==w||e[53]!==m||e[54]!==L?(U=s.jsxs(Ee,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[G,s.jsx(Me,{initialData:L,questionType:m,onSubmit:f,onCancel:V,isProcessing:w})]}),e[51]=f,e[52]=w,e[53]=m,e[54]=L,e[55]=U):U=e[55];let $;e[56]!==g||e[57]!==U?($=s.jsx(De,{open:g,onOpenChange:P,children:U}),e[56]=g,e[57]=U,e[58]=$):$=e[58];let W;return e[59]!==i||e[60]!==$||e[61]!==h||e[62]!==T||e[63]!==B?(W=s.jsxs(i,{className:h,children:[T,B,$]}),e[59]=i,e[60]=$,e[61]=h,e[62]=T,e[63]=B,e[64]=W):W=e[64],W}export{re as Q,mt as S};
