import{r as l,j as u,c as m}from"./app-DyN-wpxS.js";import{c as R,b as f}from"./index-B9ZEsc9v.js";import{b as w}from"./index-B7_9QI6J.js";import{P as v}from"./index-CNe1fd7B.js";import{s as j}from"./index-Bw4bqpEh.js";import{a as p}from"./button-CdyPjVIa.js";function C(){return j.useSyncExternalStore(y,()=>!0,()=>!1)}function y(){return()=>{}}var g="Avatar",[_,K]=R(g),[k,S]=_(g),L=l.forwardRef((n,e)=>{const{__scopeAvatar:r,...t}=n,[s,a]=l.useState("idle");return u.jsx(k,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:u.jsx(v.span,{...t,ref:e})})});L.displayName=g;var E="AvatarImage",b=l.forwardRef((n,e)=>{const{__scopeAvatar:r,src:t,onLoadingStatusChange:s=()=>{},...a}=n,c=S(E,r),o=$(t,a),i=w(d=>{s(d),c.onImageLoadingStatusChange(d)});return f(()=>{o!=="idle"&&i(o)},[o,i]),o==="loaded"?u.jsx(v.img,{...a,ref:e,src:t}):null});b.displayName=E;var h="AvatarFallback",I=l.forwardRef((n,e)=>{const{__scopeAvatar:r,delayMs:t,...s}=n,a=S(h,r),[c,o]=l.useState(t===void 0);return l.useEffect(()=>{if(t!==void 0){const i=window.setTimeout(()=>o(!0),t);return()=>window.clearTimeout(i)}},[t]),c&&a.imageLoadingStatus!=="loaded"?u.jsx(v.span,{...s,ref:e}):null});I.displayName=h;function x(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function $(n,{referrerPolicy:e,crossOrigin:r}){const t=C(),s=l.useRef(null),a=t?(s.current||(s.current=new window.Image),s.current):null,[c,o]=l.useState(()=>x(a,n));return f(()=>{o(x(a,n))},[a,n]),f(()=>{const i=N=>()=>{o(N)};if(!a)return;const d=i("loaded"),A=i("error");return a.addEventListener("load",d),a.addEventListener("error",A),e&&(a.referrerPolicy=e),typeof r=="string"&&(a.crossOrigin=r),()=>{a.removeEventListener("load",d),a.removeEventListener("error",A)}},[a,r,e]),c}var F=L,M=b,P=I;function V(n){const e=m.c(8);let r,t;e[0]!==n?({className:r,...t}=n,e[0]=n,e[1]=r,e[2]=t):(r=e[1],t=e[2]);let s;e[3]!==r?(s=p("relative flex size-8 shrink-0 overflow-hidden rounded-full",r),e[3]=r,e[4]=s):s=e[4];let a;return e[5]!==t||e[6]!==s?(a=u.jsx(F,{"data-slot":"avatar",className:s,...t}),e[5]=t,e[6]=s,e[7]=a):a=e[7],a}function W(n){const e=m.c(8);let r,t;e[0]!==n?({className:r,...t}=n,e[0]=n,e[1]=r,e[2]=t):(r=e[1],t=e[2]);let s;e[3]!==r?(s=p("aspect-square size-full",r),e[3]=r,e[4]=s):s=e[4];let a;return e[5]!==t||e[6]!==s?(a=u.jsx(M,{"data-slot":"avatar-image",className:s,...t}),e[5]=t,e[6]=s,e[7]=a):a=e[7],a}function D(n){const e=m.c(8);let r,t;e[0]!==n?({className:r,...t}=n,e[0]=n,e[1]=r,e[2]=t):(r=e[1],t=e[2]);let s;e[3]!==r?(s=p("bg-muted flex size-full items-center justify-center rounded-full",r),e[3]=r,e[4]=s):s=e[4];let a;return e[5]!==t||e[6]!==s?(a=u.jsx(P,{"data-slot":"avatar-fallback",className:s,...t}),e[5]=t,e[6]=s,e[7]=a):a=e[7],a}export{V as A,D as a,W as b};
