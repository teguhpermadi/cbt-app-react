import{c as Qe,u as Ae,r as oe,a as De,j as t,L as Oe,H as Pe}from"./app-DyN-wpxS.js";import{B as ge}from"./button-CdyPjVIa.js";import{b as be,c as je,C as ye,a as ve}from"./card-C6hf_ydR.js";import{I as Ie}from"./input-x6uegPVQ.js";import{L as Le}from"./label-DLKOY3Rp.js";import{R as we}from"./RichTextEditor-DBZWqaZR.js";import{A as Me,b as Re,a as Ve}from"./alert-D7bYVx_5.js";import{D as Be,T as He,S as Ue}from"./ScoreSelector-06NR82lj.js";import{Q as Fe,O as Ge,g as ze,I as Ke}from"./OptionsEditor-DJcr1_In.js";import{S as $e}from"./SuggestionInlineCard-CMmEKaoT.js";import{Q as Je}from"./QuestionBankController-VWCdcKL6.js";import{Q as Xe}from"./QuestionController-D8rxudnx.js";import{C as Ne}from"./circle-alert-Brz_dMHK.js";import{A as We}from"./arrow-left-C3VA2XrV.js";import{S as Ye}from"./save-BMVL6hlU.js";import{X as Ze}from"./x-lNOBUcxD.js";/* empty css            */import"./index-CNe1fd7B.js";import"./index-Bw4bqpEh.js";import"./checkbox-CA68c0MG.js";import"./index-B9ZEsc9v.js";import"./index-DjGDGm1v.js";import"./index-pm4w21PO.js";import"./select-UBe8Lx71.js";import"./index-BdQq_4o_.js";import"./index-CSsDPExf.js";import"./index-B7_9QI6J.js";import"./index-CUOTptWl.js";import"./chevron-down-DNehCCXA.js";import"./clock-D52EKvNA.js";import"./star-yK2puOfk.js";import"./textarea-nVpaP2SM.js";import"./trash-2-DUuu_oLz.js";import"./plus-ChxiFZ-N.js";import"./square-check-big-NwfVi49y.js";import"./style-B2nCtcBB.js";import"./sortable.esm-S1gzMnEx.js";import"./grip-vertical-D0hiBtzd.js";import"./badge-DvMEEYXx.js";import"./avatar-Dxh06ktP.js";import"./dialog-Y5ccQPmd.js";import"./index-D0w3UerL.js";import"./index-DW9AIAM8.js";import"./circle-check-VDgprh3j.js";import"./circle-x-BqcflfMS.js";function Kt(L){const e=Qe.c(119),{question:s}=L,le=s.content||"",qe=s.question_type,Ce=s.difficulty_level,Se=s.timer,ke=s.score_value;let r;e[0]!==s.options?(r=s.options.map(tt),e[0]=s.options,e[1]=r):r=e[1];const ne=s.hint||"";let R;e[2]!==s.difficulty_level||e[3]!==s.question_type||e[4]!==s.score_value||e[5]!==s.timer||e[6]!==le||e[7]!==r||e[8]!==ne?(R={_method:"PUT",content:le,question_type:qe,difficulty_level:Ce,timer:Se,score_value:ke,options:r,question_media:null,delete_question_media:!1,hint:ne},e[2]=s.difficulty_level,e[3]=s.question_type,e[4]=s.score_value,e[5]=s.timer,e[6]=le,e[7]=r,e[8]=ne,e[9]=R):R=e[9];const Te=R,{data:i,setData:o,post:ae,processing:re,errors:a}=Ae(Te),[V,_e]=oe.useState(s.media_url||null);let B;e[10]===Symbol.for("react.memo_cache_sentinel")?(B={},e[10]=B):B=e[10];const H=oe.useRef(B),{auth:Ee}=De().props,ce=Ee.user?.id;let U;e[11]!==s.options||e[12]!==s.question_type?(U=()=>{H.current[s.question_type]=s.options},e[11]=s.options,e[12]=s.question_type,e[13]=U):U=e[13];let F;e[14]===Symbol.for("react.memo_cache_sentinel")?(F=[],e[14]=F):F=e[14],oe.useEffect(U,F);let G;e[15]!==i.options||e[16]!==i.question_type||e[17]!==o?(G=l=>{H.current[i.question_type]=i.options;let n;H.current[l]?n=H.current[l]:n=ze(l),o(xe=>({...xe,question_type:l,options:n}))},e[15]=i.options,e[16]=i.question_type,e[17]=o,e[18]=G):G=e[18];const me=G,[z,M]=oe.useState(null);let K;e[19]!==i.content||e[20]!==i.options||e[21]!==ae||e[22]!==s.id?(K=l=>{if(l.preventDefault(),M(null),!i.content||i.content.trim()===""){M("Konten soal wajib diisi."),window.scrollTo({top:0,behavior:"smooth"});return}if(!i.options||i.options.length===0){M("Opsi jawaban harus tersedia."),window.scrollTo({top:0,behavior:"smooth"});return}if(!i.options.some(et)){M("Harus ada setidaknya satu kunci jawaban yang dipilih."),window.scrollTo({top:0,behavior:"smooth"});return}ae(Xe.update(s.id).url,{forceFormData:!0,onError:()=>{M("Terjadi kesalahan saat menyimpan. Periksa kembali inputan anda.")}})},e[19]=i.content,e[20]=i.options,e[21]=ae,e[22]=s.id,e[23]=K):K=e[23];const de=K;let $;e[24]!==o?($=l=>{const n=l.target.files?.[0];if(n){o("question_media",n),o("delete_question_media",!1);const xe=URL.createObjectURL(n);_e(xe)}},e[24]=o,e[25]=$):$=e[25];const ue=$;let J;e[26]!==o?(J=()=>{o("question_media",null),o("delete_question_media",!0),_e(null)},e[26]=o,e[27]=J):J=e[27];const pe=J,fe=`Edit Soal # ${s.id}`;let c;e[28]!==fe?(c=t.jsx(Pe,{title:fe}),e[28]=fe,e[29]=c):c=e[29];let m;e[30]!==s.question_bank_id?(m=Je.edit(s.question_bank_id),e[30]=s.question_bank_id,e[31]=m):m=e[31];let X;e[32]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx(We,{className:"h-4 w-4"}),e[32]=X):X=e[32];let d;e[33]!==m.url?(d=t.jsx(Oe,{href:m.url,className:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground h-9 w-9",children:X}),e[33]=m.url,e[34]=d):d=e[34];let W;e[35]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx("div",{className:"h-6 w-px bg-border mx-2"}),e[35]=W):W=e[35];let u;e[36]!==i.question_type||e[37]!==me?(u=t.jsx(Fe,{value:i.question_type,onValueChange:me}),e[36]=i.question_type,e[37]=me,e[38]=u):u=e[38];let p;e[39]!==o?(p=l=>o("difficulty_level",l),e[39]=o,e[40]=p):p=e[40];let f;e[41]!==i.difficulty_level||e[42]!==p?(f=t.jsx(Be,{value:i.difficulty_level,onValueChange:p}),e[41]=i.difficulty_level,e[42]=p,e[43]=f):f=e[43];let h;e[44]!==o?(h=l=>o("timer",l),e[44]=o,e[45]=h):h=e[45];let x;e[46]!==i.timer||e[47]!==h?(x=t.jsx(He,{value:i.timer,onValueChange:h}),e[46]=i.timer,e[47]=h,e[48]=x):x=e[48];let _;e[49]!==o?(_=l=>o("score_value",l),e[49]=o,e[50]=_):_=e[50];let g;e[51]!==i.score_value||e[52]!==_?(g=t.jsx(Ue,{value:i.score_value,onValueChange:_}),e[51]=i.score_value,e[52]=_,e[53]=g):g=e[53];let b;e[54]!==u||e[55]!==f||e[56]!==x||e[57]!==g?(b=t.jsxs("div",{className:"flex items-center gap-2 flex-1 overflow-x-auto pb-1 md:pb-0",children:[u,f,x,g]}),e[54]=u,e[55]=f,e[56]=x,e[57]=g,e[58]=b):b=e[58];let Y;e[59]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx(Ye,{className:"h-4 w-4"}),e[59]=Y):Y=e[59];let j;e[60]!==re||e[61]!==de?(j=t.jsxs(ge,{onClick:de,disabled:re,className:"gap-2",children:[Y,"Simpan"]}),e[60]=re,e[61]=de,e[62]=j):j=e[62];let y;e[63]!==d||e[64]!==b||e[65]!==j?(y=t.jsxs("div",{className:"sticky top-0 z-30 flex h-16 items-center gap-4 border-b bg-background px-6 shadow-sm",children:[d,W,b,j]}),e[63]=d,e[64]=b,e[65]=j,e[66]=y):y=e[66];let v;e[67]!==ce||e[68]!==s.suggestions?(v=s.suggestions&&s.suggestions.length>0&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("h3",{className:"text-lg font-semibold text-amber-700 flex items-center gap-2",children:[t.jsx(Ne,{className:"w-5 h-5"}),"Saran Perbaikan (",s.suggestions.length,")"]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.suggestions.map(l=>t.jsx("div",{className:"h-full",children:t.jsx($e,{suggestion:l,currentUserId:ce,isOwner:!0})},l.id))})]}),e[67]=ce,e[68]=s.suggestions,e[69]=v):v=e[69];let w;e[70]!==z?(w=z&&t.jsxs(Me,{variant:"destructive",children:[t.jsx(Ne,{className:"h-4 w-4"}),t.jsx(Re,{children:"Error Validasi"}),t.jsx(Ve,{children:z})]}),e[70]=z,e[71]=w):w=e[71];let Z;e[72]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx(be,{children:t.jsx(je,{className:"text-lg",children:"Konten Soal"})}),e[72]=Z):Z=e[72];let N;e[73]!==o?(N=l=>o("content",l),e[73]=o,e[74]=N):N=e[74];let q;e[75]!==i.content||e[76]!==N?(q=t.jsx(we,{value:i.content,onChange:N,placeholder:"Tuliskan pertanyaan di sini...",className:"min-h-[120px]"}),e[75]=i.content,e[76]=N,e[77]=q):q=e[77];let C;e[78]!==a.content?(C=a.content&&t.jsx("p",{className:"text-red-500 text-sm",children:a.content}),e[78]=a.content,e[79]=C):C=e[79];let ee;e[80]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx(Le,{children:"Media / Gambar (Opsional)"}),e[80]=ee):ee=e[80];let S;e[81]!==V||e[82]!==pe?(S=V?t.jsxs("div",{className:"relative group",children:[t.jsx("img",{src:V,alt:"Preview",className:"h-40 w-auto object-contain rounded-md border bg-muted"}),t.jsx(ge,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",onClick:pe,children:t.jsx(Ze,{className:"h-3 w-3"})})]}):t.jsx("div",{className:"h-40 w-40 flex items-center justify-center rounded-md border border-dashed bg-muted/50 text-muted-foreground",children:t.jsx(Ke,{className:"h-10 w-10 opacity-50"})}),e[81]=V,e[82]=pe,e[83]=S):S=e[83];let k;e[84]!==ue?(k=t.jsx(Ie,{type:"file",accept:"image/*",onChange:ue,className:"max-w-xs"}),e[84]=ue,e[85]=k):k=e[85];let te;e[86]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Format: JPG, PNG, GIF. Maks: 2MB."}),e[86]=te):te=e[86];let T;e[87]!==k?(T=t.jsxs("div",{className:"space-y-2",children:[k,te]}),e[87]=k,e[88]=T):T=e[88];let E;e[89]!==S||e[90]!==T?(E=t.jsxs("div",{className:"space-y-2",children:[ee,t.jsxs("div",{className:"flex items-start gap-4",children:[S,T]})]}),e[89]=S,e[90]=T,e[91]=E):E=e[91];let Q;e[92]!==q||e[93]!==C||e[94]!==E?(Q=t.jsxs(ye,{className:"border-primary/10 shadow-md",children:[Z,t.jsxs(ve,{className:"space-y-4",children:[q,C,E]})]}),e[92]=q,e[93]=C,e[94]=E,e[95]=Q):Q=e[95];let se;e[96]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx(be,{children:t.jsx(je,{className:"text-lg",children:"Hint (Bantuan)"})}),e[96]=se):se=e[96];const he=i.hint||"";let A;e[97]!==o?(A=l=>o("hint",l),e[97]=o,e[98]=A):A=e[98];let D;e[99]!==he||e[100]!==A?(D=t.jsxs(ye,{className:"border-primary/10 shadow-md",children:[se,t.jsx(ve,{className:"space-y-4",children:t.jsx(we,{value:he,onChange:A,placeholder:"Tuliskan hint atau bantuan untuk siswa di sini (opsional)...",className:"min-h-[80px]"})})]}),e[99]=he,e[100]=A,e[101]=D):D=e[101];let O;e[102]!==o?(O=l=>o("options",l),e[102]=o,e[103]=O):O=e[103];let P;e[104]!==i.options||e[105]!==i.question_type||e[106]!==a||e[107]!==O?(P=t.jsx(Ge,{type:i.question_type,options:i.options,onChange:O,errors:a}),e[104]=i.options,e[105]=i.question_type,e[106]=a,e[107]=O,e[108]=P):P=e[108];let I;e[109]!==v||e[110]!==w||e[111]!==Q||e[112]!==D||e[113]!==P?(I=t.jsxs("div",{className:"flex-1 overflow-auto p-6 space-y-6 max-w-5xl mx-auto w-full",children:[v,w,Q,D,P]}),e[109]=v,e[110]=w,e[111]=Q,e[112]=D,e[113]=P,e[114]=I):I=e[114];let ie;return e[115]!==c||e[116]!==y||e[117]!==I?(ie=t.jsxs("div",{className:"min-h-screen bg-muted/40 flex flex-col",children:[c,y,I]}),e[115]=c,e[116]=y,e[117]=I,e[118]=ie):ie=e[118],ie}function et(L){return L.is_correct}function tt(L){return{...L,media_file:null,delete_media:!1}}export{Kt as default};
