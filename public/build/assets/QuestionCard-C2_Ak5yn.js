import{r as p,j as t,c as F}from"./app-DyN-wpxS.js";import{b as Ne,a as we,e as ke,C as ye}from"./card-C6hf_ydR.js";import{B as K}from"./badge-DvMEEYXx.js";import{c as _e,u as Q,b as Ce,a as M,B as G}from"./button-CdyPjVIa.js";import{D as Pe,T as Oe,S as Re}from"./ScoreSelector-06NR82lj.js";import{I as Ae}from"./input-x6uegPVQ.js";import{u as Se,c as Ee,a as W,P as Y}from"./index-B9ZEsc9v.js";import{u as $e,P as Te,h as Me,R as Fe,a as De,F as Ie,D as Ue}from"./index-B7_9QI6J.js";import{c as Z,R as We,A as ee,C as Be,a as Le}from"./index-CUOTptWl.js";import{P as te}from"./index-CNe1fd7B.js";import{R as B,M as ze}from"./RichTextEditor-DBZWqaZR.js";import{R as Ve,u as He,a as Ke,b as qe,M as H,c as J,i as Ge,B as Je,C as Xe,H as re,P as se}from"./style-B2nCtcBB.js";import{M as z}from"./MathRenderer-DYpDUqD8.js";import{C as Qe}from"./circle-check-VDgprh3j.js";import{S as Ye}from"./square-check-big-NwfVi49y.js";import{S as Ze}from"./square-D7hxKJse.js";import{G as et}from"./grip-vertical-D0hiBtzd.js";import{C as ae}from"./index-pm4w21PO.js";import{X as ne}from"./x-lNOBUcxD.js";import{S as tt}from"./square-pen-BPB4lnzT.js";import{T as rt}from"./trash-2-DUuu_oLz.js";const st=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],at=_e("Tag",st);function nt(i,e,r,l){var a=this,n=p.useRef(null),d=p.useRef(0),c=p.useRef(0),o=p.useRef(null),s=p.useRef([]),u=p.useRef(),x=p.useRef(),h=p.useRef(i),g=p.useRef(!0);h.current=i;var k=typeof window<"u",m=!e&&e!==0&&k;if(typeof i!="function")throw new TypeError("Expected a function");e=+e||0;var b=!!(r=r||{}).leading,v=!("trailing"in r)||!!r.trailing,_="maxWait"in r,f="debounceOnServer"in r&&!!r.debounceOnServer,j=_?Math.max(+r.maxWait||0,e):null;p.useEffect(function(){return g.current=!0,function(){g.current=!1}},[]);var R=p.useMemo(function(){var w=function(P){var O=s.current,$=u.current;return s.current=u.current=null,d.current=P,c.current=c.current||P,x.current=h.current.apply($,O)},N=function(P,O){m&&cancelAnimationFrame(o.current),o.current=m?requestAnimationFrame(P):setTimeout(P,O)},y=function(P){if(!g.current)return!1;var O=P-n.current;return!n.current||O>=e||O<0||_&&P-d.current>=j},S=function(P){return o.current=null,v&&s.current?w(P):(s.current=u.current=null,x.current)},E=function P(){var O=Date.now();if(b&&c.current===d.current&&T(),y(O))return S(O);if(g.current){var $=e-(O-n.current),A=_?Math.min($,j-(O-d.current)):$;N(P,A)}},T=function(){l&&l({})},C=function(){if(k||f){var P=Date.now(),O=y(P);if(s.current=[].slice.call(arguments),u.current=a,n.current=P,O){if(!o.current&&g.current)return d.current=n.current,N(E,e),b?w(n.current):x.current;if(_)return N(E,e),w(n.current)}return o.current||N(E,e),x.current}};return C.cancel=function(){var P=o.current;P&&(m?cancelAnimationFrame(o.current):clearTimeout(o.current)),d.current=0,s.current=n.current=u.current=o.current=null,P&&l&&l({})},C.isPending=function(){return!!o.current},C.flush=function(){return o.current?S(Date.now()):x.current},C},[b,_,e,j,v,m,k,f,l]);return R}function ot(i,e){return i===e}function lt(i,e,r){var l=ot,a=p.useRef(i),n=p.useState({})[1],d=nt(p.useCallback(function(o){a.current=o,n({})},[n]),e,r,n),c=p.useRef(i);return l(c.current,i)||(d(i),c.current=i),[a.current,d]}var V="Popover",[oe,xr]=Ee(V,[Z]),L=Z(),[it,D]=oe(V),le=i=>{const{__scopePopover:e,children:r,open:l,defaultOpen:a,onOpenChange:n,modal:d=!1}=i,c=L(e),o=p.useRef(null),[s,u]=p.useState(!1),[x,h]=Se({prop:l,defaultProp:a??!1,onChange:n,caller:V});return t.jsx(We,{...c,children:t.jsx(it,{scope:e,contentId:$e(),triggerRef:o,open:x,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(g=>!g),[h]),hasCustomAnchor:s,onCustomAnchorAdd:p.useCallback(()=>u(!0),[]),onCustomAnchorRemove:p.useCallback(()=>u(!1),[]),modal:d,children:r})})};le.displayName=V;var ie="PopoverAnchor",ct=p.forwardRef((i,e)=>{const{__scopePopover:r,...l}=i,a=D(ie,r),n=L(r),{onCustomAnchorAdd:d,onCustomAnchorRemove:c}=a;return p.useEffect(()=>(d(),()=>c()),[d,c]),t.jsx(ee,{...n,...l,ref:e})});ct.displayName=ie;var ce="PopoverTrigger",de=p.forwardRef((i,e)=>{const{__scopePopover:r,...l}=i,a=D(ce,r),n=L(r),d=Q(e,a.triggerRef),c=t.jsx(te.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":xe(a.open),...l,ref:d,onClick:W(i.onClick,a.onOpenToggle)});return a.hasCustomAnchor?c:t.jsx(ee,{asChild:!0,...n,children:c})});de.displayName=ce;var q="PopoverPortal",[dt,ut]=oe(q,{forceMount:void 0}),ue=i=>{const{__scopePopover:e,forceMount:r,children:l,container:a}=i,n=D(q,e);return t.jsx(dt,{scope:e,forceMount:r,children:t.jsx(Y,{present:r||n.open,children:t.jsx(Te,{asChild:!0,container:a,children:l})})})};ue.displayName=q;var U="PopoverContent",me=p.forwardRef((i,e)=>{const r=ut(U,i.__scopePopover),{forceMount:l=r.forceMount,...a}=i,n=D(U,i.__scopePopover);return t.jsx(Y,{present:l||n.open,children:n.modal?t.jsx(ft,{...a,ref:e}):t.jsx(pt,{...a,ref:e})})});me.displayName=U;var mt=Ce("PopoverContent.RemoveScroll"),ft=p.forwardRef((i,e)=>{const r=D(U,i.__scopePopover),l=p.useRef(null),a=Q(e,l),n=p.useRef(!1);return p.useEffect(()=>{const d=l.current;if(d)return Me(d)},[]),t.jsx(Fe,{as:mt,allowPinchZoom:!0,children:t.jsx(fe,{...i,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:W(i.onCloseAutoFocus,d=>{d.preventDefault(),n.current||r.triggerRef.current?.focus()}),onPointerDownOutside:W(i.onPointerDownOutside,d=>{const c=d.detail.originalEvent,o=c.button===0&&c.ctrlKey===!0,s=c.button===2||o;n.current=s},{checkForDefaultPrevented:!1}),onFocusOutside:W(i.onFocusOutside,d=>d.preventDefault(),{checkForDefaultPrevented:!1})})})}),pt=p.forwardRef((i,e)=>{const r=D(U,i.__scopePopover),l=p.useRef(!1),a=p.useRef(!1);return t.jsx(fe,{...i,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:n=>{i.onCloseAutoFocus?.(n),n.defaultPrevented||(l.current||r.triggerRef.current?.focus(),n.preventDefault()),l.current=!1,a.current=!1},onInteractOutside:n=>{i.onInteractOutside?.(n),n.defaultPrevented||(l.current=!0,n.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const d=n.target;r.triggerRef.current?.contains(d)&&n.preventDefault(),n.detail.originalEvent.type==="focusin"&&a.current&&n.preventDefault()}})}),fe=p.forwardRef((i,e)=>{const{__scopePopover:r,trapFocus:l,onOpenAutoFocus:a,onCloseAutoFocus:n,disableOutsidePointerEvents:d,onEscapeKeyDown:c,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:u,...x}=i,h=D(U,r),g=L(r);return De(),t.jsx(Ie,{asChild:!0,loop:!0,trapped:l,onMountAutoFocus:a,onUnmountAutoFocus:n,children:t.jsx(Ue,{asChild:!0,disableOutsidePointerEvents:d,onInteractOutside:u,onEscapeKeyDown:c,onPointerDownOutside:o,onFocusOutside:s,onDismiss:()=>h.onOpenChange(!1),children:t.jsx(Be,{"data-state":xe(h.open),role:"dialog",id:h.contentId,...g,...x,ref:e,style:{...x.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),pe="PopoverClose",xt=p.forwardRef((i,e)=>{const{__scopePopover:r,...l}=i,a=D(pe,r);return t.jsx(te.button,{type:"button",...l,ref:e,onClick:W(i.onClick,()=>a.onOpenChange(!1))})});xt.displayName=pe;var ht="PopoverArrow",gt=p.forwardRef((i,e)=>{const{__scopePopover:r,...l}=i,a=L(r);return t.jsx(Le,{...a,...l,ref:e})});gt.displayName=ht;function xe(i){return i?"open":"closed"}var bt=le,vt=de,jt=ue,he=me;const Nt=bt,wt=vt,ge=p.forwardRef((i,e)=>{const r=F.c(13);let l,a,n,d;r[0]!==i?({className:l,align:n,sideOffset:d,...a}=i,r[0]=i,r[1]=l,r[2]=a,r[3]=n,r[4]=d):(l=r[1],a=r[2],n=r[3],d=r[4]);const c=n===void 0?"center":n,o=d===void 0?4:d;let s;r[5]!==l?(s=M("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",l),r[5]=l,r[6]=s):s=r[6];let u;return r[7]!==c||r[8]!==a||r[9]!==e||r[10]!==o||r[11]!==s?(u=t.jsx(jt,{children:t.jsx(he,{ref:e,align:c,sideOffset:o,className:s,...a})}),r[7]=c,r[8]=a,r[9]=e,r[10]=o,r[11]=s,r[12]=u):u=r[12],u});ge.displayName=he.displayName;function kt({onSelect:i,placeholder:e="Add tag...",className:r}){const[l,a]=p.useState(!1),[n,d]=p.useState(""),[c]=lt(n,300),[o,s]=p.useState([]),[u,x]=p.useState(!1),h=p.useRef(null);p.useEffect(()=>{if(c.trim().length===0){s([]);return}(async()=>{x(!0);try{const b=await fetch(`/admin/tags/search?query=${encodeURIComponent(c)}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(b.ok){const v=await b.json();s(v)}}catch(b){console.error("Failed to fetch tags",b)}finally{x(!1)}})()},[c]);const g=m=>{i(m),d(""),a(!1),s([]),h.current?.focus()},k=m=>{m.key==="Enter"&&(m.preventDefault(),n.trim()&&g(n.trim()))};return t.jsxs(Nt,{open:l&&o.length>0,onOpenChange:a,children:[t.jsx(wt,{asChild:!0,children:t.jsx("div",{className:M("relative w-full",r),children:t.jsx(Ae,{ref:h,value:n,onChange:m=>{d(m.target.value),a(!0)},onFocus:()=>{o.length>0&&a(!0)},onKeyDown:k,placeholder:e,className:"h-8 text-sm"})})}),t.jsx(ge,{className:"p-1 w-[200px]",align:"start",onOpenAutoFocus:m=>m.preventDefault(),children:t.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:o.map((m,b)=>t.jsx("div",{onClick:()=>g(m),className:"cursor-pointer rounded-sm px-2 py-1.5 text-sm outline-none hover:bg-accent hover:text-accent-foreground",children:m},`${m}-${b}`))})})]})}function yt(i){const e=F.c(8),{options:r,showKeyAnswer:l}=i,a=l===void 0?!0:l,n=r[0],d=n?.metadata?.rubric,c=n?.content;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=t.jsx(B,{value:"",placeholder:"Area jawaban peserta...",readOnly:!0,className:"bg-muted/20"}),e[0]=o):o=e[0];let s;e[1]!==c||e[2]!==n||e[3]!==d||e[4]!==a?(s=a&&(n||d)&&t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg border border-slate-100 dark:border-slate-800 space-y-3",children:[t.jsx("h4",{className:"text-xs font-semibold uppercase text-muted-foreground tracking-wider mb-2",children:"Panduan Penilaian / Rubrik"}),c&&t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"text-xs font-medium text-emerald-600 dark:text-emerald-500",children:"Contoh Jawaban / Poin Utama:"}),t.jsx(B,{value:c,readOnly:!0,className:"prose prose-sm max-w-none"})]}),d&&t.jsxs("div",{className:"space-y-1 mt-3 pt-3 border-t border-dashed border-slate-200 dark:border-slate-700",children:[t.jsx("div",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Rubrik Penilaian:"}),t.jsx("pre",{className:"text-xs whitespace-pre-wrap bg-white dark:bg-black/20 p-2 rounded border border-slate-100 dark:border-slate-800",children:JSON.stringify(d,null,2)})]})]}),e[1]=c,e[2]=n,e[3]=d,e[4]=a,e[5]=s):s=e[5];let u;return e[6]!==s?(u=t.jsxs("div",{className:"space-y-4",children:[o,s]}),e[6]=s,e[7]=u):u=e[7],u}function _t(i){const e=F.c(26),{id:r,data:l}=i,a=l.isSelected,n=l.isConnected,d=l.colorClass,c=a?"ring-2 ring-primary border-primary shadow-md":"",o=!a&&n?"border-muted-foreground/50":"";let s;e[0]!==d||e[1]!==c||e[2]!==o?(s=M("relative p-3 rounded-lg border-2 text-sm flex items-center min-h-[100px] bg-card w-[400px] shadow-sm transition-all duration-200 cursor-pointer select-none",d,c,o),e[0]=d,e[1]=c,e[2]=o,e[3]=s):s=e[3];let u;e[4]!==l.onNodeClick||e[5]!==r?(u=j=>{l.onNodeClick&&l.onNodeClick(j,r,"left")},e[4]=l.onNodeClick,e[5]=r,e[6]=u):u=e[6];const x=!l.isReadOnly;let h;e[7]!==x?(h=t.jsx(re,{type:"source",position:se.Right,className:"absolute inset-0 w-full h-full opacity-0 z-10 rounded-lg cursor-pointer",id:"source",isConnectable:x}),e[7]=x,e[8]=h):h=e[8];let g;e[9]!==l.pairId||e[10]!==l.showKeyAnswer?(g=l.showKeyAnswer&&t.jsx("span",{className:"mr-2 text-xs font-bold opacity-50 bg-white/50 dark:bg-black/20 px-1 rounded inline-block mb-1",children:l.pairId}),e[9]=l.pairId,e[10]=l.showKeyAnswer,e[11]=g):g=e[11];const k=l.content;let m;e[12]!==k?(m=t.jsx(B,{value:k,readOnly:!0,className:"border-0 bg-transparent p-0 min-h-0 text-sm"}),e[12]=k,e[13]=m):m=e[13];let b;e[14]!==l.mediaUrl?(b=l.mediaUrl&&t.jsx("div",{className:"mt-2 rounded overflow-hidden border border-border h-24 w-auto bg-white/50 inline-block relative z-20",children:t.jsx("img",{src:l.mediaUrl,alt:"Visual",className:"h-full w-auto object-contain"})}),e[14]=l.mediaUrl,e[15]=b):b=e[15];let v;e[16]!==m||e[17]!==b||e[18]!==g?(v=t.jsxs("div",{className:"flex-1 min-w-0 pointer-events-none",children:[g,m,b]}),e[16]=m,e[17]=b,e[18]=g,e[19]=v):v=e[19];let _;e[20]===Symbol.for("react.memo_cache_sentinel")?(_=t.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 translate-x-1/2 w-4 h-4 bg-muted-foreground border-2 border-background rounded-full z-0 pointer-events-none"}),e[20]=_):_=e[20];let f;return e[21]!==v||e[22]!==s||e[23]!==u||e[24]!==h?(f=t.jsxs("div",{className:s,onClick:u,children:[h,v,_]}),e[21]=v,e[22]=s,e[23]=u,e[24]=h,e[25]=f):f=e[25],f}function Ct(i){const e=F.c(26),{id:r,data:l}=i,a=l.isSelected,n=l.isConnected,d=l.colorClass,c=a?"ring-2 ring-primary border-primary shadow-md":"",o=!a&&n?"border-muted-foreground/50":"";let s;e[0]!==d||e[1]!==c||e[2]!==o?(s=M("relative p-3 rounded-lg border-2 text-sm flex items-center min-h-[100px] bg-card w-[400px] shadow-sm transition-all duration-200 cursor-pointer select-none",d,c,o),e[0]=d,e[1]=c,e[2]=o,e[3]=s):s=e[3];let u;e[4]!==l.onNodeClick||e[5]!==r?(u=j=>{l.onNodeClick&&l.onNodeClick(j,r,"right")},e[4]=l.onNodeClick,e[5]=r,e[6]=u):u=e[6];const x=!l.isReadOnly;let h;e[7]!==x?(h=t.jsx(re,{type:"target",position:se.Left,className:"absolute inset-0 w-full h-full opacity-0 z-10 rounded-lg cursor-pointer",id:"target",isConnectable:x}),e[7]=x,e[8]=h):h=e[8];let g;e[9]===Symbol.for("react.memo_cache_sentinel")?(g=t.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-1/2 w-4 h-4 bg-muted-foreground border-2 border-background rounded-full z-0 pointer-events-none"}),e[9]=g):g=e[9];const k=l.content;let m;e[10]!==k?(m=t.jsx(B,{value:k,readOnly:!0,className:"border-0 bg-transparent p-0 min-h-0 text-sm [&_.ProseMirror]:text-right"}),e[10]=k,e[11]=m):m=e[11];let b;e[12]!==l.mediaUrl?(b=l.mediaUrl&&t.jsx("div",{className:"mt-2 rounded overflow-hidden border border-border h-24 w-auto bg-white/50 inline-block relative z-20",children:t.jsx("img",{src:l.mediaUrl,alt:"Visual",className:"h-full w-auto object-contain"})}),e[12]=l.mediaUrl,e[13]=b):b=e[13];let v;e[14]!==m||e[15]!==b?(v=t.jsxs("div",{className:"flex-1 text-right min-w-0 pointer-events-none",children:[m,b]}),e[14]=m,e[15]=b,e[16]=v):v=e[16];let _;e[17]!==l.pairId||e[18]!==l.showKeyAnswer?(_=l.showKeyAnswer&&t.jsx("span",{className:"ml-2 text-xs font-bold opacity-50 bg-white/50 dark:bg-black/20 px-1 rounded inline-block mb-1",children:l.pairId}),e[17]=l.pairId,e[18]=l.showKeyAnswer,e[19]=_):_=e[19];let f;return e[20]!==v||e[21]!==_||e[22]!==s||e[23]!==u||e[24]!==h?(f=t.jsxs("div",{className:s,onClick:u,children:[h,g,v,_]}),e[20]=v,e[21]=_,e[22]=s,e[23]=u,e[24]=h,e[25]=f):f=e[25],f}const Pt={leftOption:_t,rightOption:Ct},X=(i,e,r=!1)=>{if(e&&i){const l=["border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-950/30","border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-950/30","border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-950/30","border-yellow-200 bg-yellow-50 dark:border-yellow-800 dark:bg-yellow-950/30","border-purple-200 bg-purple-50 dark:border-purple-800 dark:bg-purple-950/30","border-orange-200 bg-orange-50 dark:border-orange-800 dark:bg-orange-950/30"],a=typeof i=="number"?i:parseInt(i)||0;return l[(a-1)%l.length]}return r?"border-blue-300 bg-blue-50 dark:border-blue-700 dark:bg-blue-900/20":"border-border bg-card hover:border-blue-300 dark:hover:border-blue-700 transition-colors"};function Ot({options:i,showKeyAnswer:e=!1,onAnswerChange:r,isReadOnly:l=!1}){const[a,n,d]=He([]),[c,o,s]=Ke([]),[u,x]=p.useState(null),{fitView:h}=qe();p.useEffect(()=>{if(!i)return;const f=i.filter(w=>w.option_key.startsWith("L")||w.metadata?.side==="left"),j=i.filter(w=>w.option_key.startsWith("R")||w.metadata?.side==="right"),R=[];f.forEach(w=>{const N=w.metadata?.pair_id;if(N){const y=j.find(S=>S.metadata?.pair_id==N);y&&R.push({id:`e-l-${w.id}-r-${y.id}`,source:`l-${w.id}`,target:`r-${y.id}`,sourceHandle:"source",targetHandle:"target",animated:!e,style:{strokeWidth:e?3:2,stroke:e?"#22c55e":"#3b82f6"},markerEnd:{type:H.ArrowClosed,color:e?"#22c55e":"#3b82f6"}})}}),o(R)},[i,e,o]),p.useEffect(()=>{const f=i.filter(C=>C.option_key.startsWith("L")||C.metadata?.side==="left"),j=i.filter(C=>C.option_key.startsWith("R")||C.metadata?.side==="right"),R=50,w=700,N=50,y=180,S=[],E=(C,P)=>c.some(O=>P==="source"?O.source===C:O.target===C),T=l||e;f.forEach((C,P)=>{const O=`l-${C.id}`,$=E(O,"source");S.push({id:O,type:"leftOption",position:{x:R,y:N+P*y},draggable:!1,data:{content:C.content,mediaUrl:C.media_url||C.media_path,pairId:C.metadata?.pair_id,colorClass:X(C.metadata?.pair_id,e,$),showKeyAnswer:e,isReadOnly:T,isSelected:u===O,isConnected:$,onNodeClick:g}})}),j.forEach((C,P)=>{const O=`r-${C.id}`,$=E(O,"target");S.push({id:O,type:"rightOption",position:{x:w,y:N+P*y},draggable:!1,data:{content:C.content,mediaUrl:C.media_url||C.media_path,pairId:C.metadata?.pair_id,colorClass:X(C.metadata?.pair_id,e,$),showKeyAnswer:e,isReadOnly:T,isSelected:u===O,isConnected:$,onNodeClick:g}})}),n(S)},[i,e,c,u,l]);const g=p.useCallback((f,j,R)=>{l||e||(f.stopPropagation(),x(w=>{if(w===j)return null;if(!w)return j;const N=w.startsWith("l-"),y=j.startsWith("l-");return N===y?j:(k(N?w:j,N?j:w),null)}))},[u,l,e]),k=(f,j)=>{const R={id:`e-${f}-${j}`,source:f,target:j,sourceHandle:"source",targetHandle:"target",animated:!0,style:{strokeWidth:2,stroke:"#3b82f6"},markerEnd:{type:H.ArrowClosed,color:"#3b82f6"}};o(w=>{const N=w.filter(y=>y.source!==f&&y.target!==j);return J(R,N)})},m=p.useCallback(f=>{l||e||(o(j=>{const R=j.filter(w=>w.source!==f.source&&w.target!==f.target);return J({...f,animated:!0,style:{strokeWidth:2,stroke:"#3b82f6"},markerEnd:{type:H.ArrowClosed,color:"#3b82f6"}},R)}),x(null))},[o,l,e]),b=p.useCallback((f,j)=>{l||e||o(R=>R.filter(w=>w.id!==j.id))},[l,e]);p.useEffect(()=>{if(e||!r)return;const f=new Map;c.forEach((N,y)=>{const S=N.source.replace("l-",""),E=N.target.replace("r-",""),T=y+1;f.set(S,T),f.set(E,T)});const j=i.map(N=>N.metadata?.pair_id),R=i.map(N=>f.get(N.id));if(j.some((N,y)=>N!==R[y])){const N=i.map(y=>({...y,metadata:{...y.metadata,pair_id:f.get(y.id)}}));r(N)}},[c,r]);const v=Math.max(i.filter(f=>f.option_key.startsWith("L")||f.metadata?.side==="left").length,i.filter(f=>f.option_key.startsWith("R")||f.metadata?.side==="right").length),_=Math.max(400,v*180+100);return t.jsx("div",{className:"w-full border rounded-xl overflow-hidden bg-muted/10 relative",style:{height:`${_}px`},children:t.jsxs(Ge,{nodes:a,edges:c,onNodesChange:d,onEdgesChange:s,onConnect:m,onEdgeClick:b,onPaneClick:()=>x(null),nodeTypes:Pt,nodesDraggable:!1,panOnDrag:!1,panOnScroll:!1,zoomOnScroll:!1,fitView:!0,fitViewOptions:{padding:.2},proOptions:{hideAttribution:!0},children:[t.jsx(Je,{color:"#94a3b8",gap:20,size:1}),t.jsx(Xe,{showInteractive:!1})]})})}function Rt(i){const e=F.c(2);let r;return e[0]!==i?(r=t.jsx(Ve,{children:t.jsx(Ot,{...i})}),e[0]=i,e[1]=r):r=e[1],r}function At(i){const e=F.c(7),{options:r,showKeyAnswer:l}=i,a=l===void 0?!0:l;let n;if(e[0]!==r||e[1]!==a){let c;e[3]!==a?(c=o=>{const s=a&&o.is_correct;return t.jsxs("div",{className:M("flex items-start gap-3 p-4 rounded-xl border transition-all",s?"bg-emerald-50 border-emerald-200 dark:bg-emerald-950/30 dark:border-emerald-800":"bg-card border-border hover:border-primary/50"),children:[t.jsx("div",{className:"flex-shrink-0 mt-0.5",children:s?t.jsx(Qe,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}):t.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-muted-foreground/30 flex items-center justify-center text-[10px] font-medium text-muted-foreground",children:o.option_key})}),t.jsxs("div",{className:"flex-1 space-y-2",children:[t.jsx(z,{className:M("text-sm",s&&"font-medium text-emerald-900 dark:text-emerald-100"),content:o.content}),(o.media_url||o.media_path)&&t.jsx("div",{className:"mt-2 rounded-lg overflow-hidden border border-border max-w-xs",children:t.jsx("img",{src:o.media_url||o.media_path||"",alt:`Option ${o.option_key}`,className:"max-h-[100px] max-w-full object-cover"})})]})]},o.id)},e[3]=a,e[4]=c):c=e[4],n=r.map(c),e[0]=r,e[1]=a,e[2]=n}else n=e[2];let d;return e[5]!==n?(d=t.jsx("div",{className:"grid gap-3",children:n}),e[5]=n,e[6]=d):d=e[6],d}function St(i){const e=F.c(7),{options:r,showKeyAnswer:l}=i,a=l===void 0?!0:l;let n;if(e[0]!==r||e[1]!==a){let c;e[3]!==a?(c=o=>{const s=a&&o.is_correct;return t.jsxs("div",{className:M("flex items-start gap-3 p-4 rounded-xl border transition-all",s?"bg-emerald-50 border-emerald-200 dark:bg-emerald-950/30 dark:border-emerald-800":"bg-card border-border hover:border-primary/50"),children:[t.jsx("div",{className:"flex-shrink-0 mt-0.5",children:s?t.jsx(Ye,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}):t.jsx(Ze,{className:"w-5 h-5 text-muted-foreground/30"})}),t.jsxs("div",{className:"flex-1 space-y-2",children:[t.jsx("div",{className:"flex items-center gap-2 mb-1",children:t.jsx("span",{className:"text-xs font-semibold px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400",children:o.option_key})}),t.jsx(z,{className:M("text-sm",s&&"font-medium text-emerald-900 dark:text-emerald-100"),content:o.content}),(o.media_url||o.media_path)&&t.jsx("div",{className:"mt-2 rounded-lg overflow-hidden border border-border max-w-xs",children:t.jsx("img",{src:o.media_url||o.media_path||"",alt:`Option ${o.option_key}`,className:"max-h-[100px] max-w-full object-cover"})})]})]},o.id)},e[3]=a,e[4]=c):c=e[4],n=r.map(c),e[0]=r,e[1]=a,e[2]=n}else n=e[2];let d;return e[5]!==n?(d=t.jsx("div",{className:"grid gap-3",children:n}),e[5]=n,e[6]=d):d=e[6],d}function Et(i){const e=F.c(10),{options:r,showKeyAnswer:l}=i,a=l===void 0?!0:l,n=r[0];if(!n){let u;return e[0]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx("div",{className:"text-muted-foreground",children:"Konfigurasi jawaban tidak valid."}),e[0]=u):u=e[0],u}const d=n.metadata?.correct_answer??n.content;let c;e[1]!==n.media_path||e[2]!==n.media_url?(c=(n.media_url||n.media_path)&&t.jsx("div",{className:"rounded-lg overflow-hidden border border-border max-w-xs",children:t.jsx("img",{src:n.media_url||n.media_path||"",alt:"Context",className:"max-h-[100px] max-w-full object-cover"})}),e[1]=n.media_path,e[2]=n.media_url,e[3]=c):c=e[3];let o;e[4]!==d||e[5]!==a?(o=a&&t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg border border-slate-100 dark:border-slate-800 space-y-2",children:[t.jsx("h4",{className:"text-xs font-semibold uppercase text-muted-foreground tracking-wider",children:"Kunci Jawaban"}),t.jsx("div",{className:"space-y-2",children:t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:"text-xs text-muted-foreground",children:"Rumus / Jawaban"}),t.jsx(ze,{value:d,readOnly:!0,className:"w-full p-3 text-base border rounded-lg bg-white dark:bg-slate-950"})]})})]}),e[4]=d,e[5]=a,e[6]=o):o=e[6];let s;return e[7]!==c||e[8]!==o?(s=t.jsxs("div",{className:"space-y-4",children:[c,o]}),e[7]=c,e[8]=o,e[9]=s):s=e[9],s}function $t(i){const e=F.c(14),{options:r,showKeyAnswer:l}=i,a=l===void 0?!0:l;let n;e[0]!==r||e[1]!==a?(n=[...r],a?n.sort(Mt):n.sort(Tt),e[0]=r,e[1]=a,e[2]=n):n=e[2];let d;e[3]!==n||e[4]!==a?(d=n.map((u,x)=>t.jsxs("div",{className:"relative group",children:[x<n.length-1&&t.jsx("div",{className:"absolute left-6 top-full h-2 w-0.5 bg-muted/50 -ml-px z-0"}),t.jsxs("div",{className:M("relative z-10 flex items-center gap-3 p-3 rounded-xl border bg-card transition-all",a?"border-emerald-100 bg-emerald-50/30 dark:border-emerald-900/30 dark:bg-emerald-950/10":"border-border"),children:[t.jsx("div",{className:M("w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold shadow-sm",a?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-300":"bg-muted text-muted-foreground"),children:x+1}),t.jsx("div",{className:"bg-muted/30 p-1.5 rounded-md text-muted-foreground cursor-grab active:cursor-grabbing",children:t.jsx(et,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx(z,{className:"text-sm font-medium",content:u.content}),(u.media_url||u.media_path)&&t.jsx("div",{className:"mt-2 rounded-lg overflow-hidden border border-border max-w-xs",children:t.jsx("img",{src:u.media_url||u.media_path||"",alt:"Visual",className:"max-h-[100px] max-w-full object-cover"})})]})]})]},u.id)),e[3]=n,e[4]=a,e[5]=d):d=e[5];let c;e[6]!==a?(c=!a&&t.jsx("div",{className:"text-center text-xs text-muted-foreground pt-2 italic",children:"Urutkan item di atas"}),e[6]=a,e[7]=c):c=e[7];let o;e[8]!==a?(o=a&&t.jsx("div",{className:"text-center text-xs text-emerald-600 dark:text-emerald-400 pt-2 font-medium",children:"Susunan Yang Benar"}),e[8]=a,e[9]=o):o=e[9];let s;return e[10]!==d||e[11]!==c||e[12]!==o?(s=t.jsxs("div",{className:"space-y-2",children:[d,c,o]}),e[10]=d,e[11]=c,e[12]=o,e[13]=s):s=e[13],s}function Tt(i,e){return i.order-e.order}function Mt(i,e){const r=i.metadata?.correct_position??0,l=e.metadata?.correct_position??0;return r-l}function Ft(i){const e=F.c(13),{options:r,showKeyAnswer:l}=i,a=l===void 0?!0:l;let n,d,c;if(e[0]!==r||e[1]!==a){const s=r.find(It),u=r.find(Dt);let x;e[5]!==a?(x=(m,b,v,_)=>{if(!m)return null;const f=a&&m.is_correct;return t.jsxs("div",{className:M("flex-1 flex flex-col items-center justify-center p-6 rounded-xl border-2 transition-all gap-3 cursor-default",f?`bg-${v}-50 border-${v}-500 dark:bg-${v}-950/30`:"bg-card border-border opacity-50 grayscale"),children:[t.jsx("div",{className:M("w-12 h-12 rounded-full flex items-center justify-center",f?`bg-${v}-100 text-${v}-600`:"bg-muted text-muted-foreground"),children:_}),t.jsx(z,{className:M("font-bold text-lg",f?`text-${v}-700 dark:text-${v}-300`:"text-muted-foreground"),content:m.content||b}),f&&t.jsx("span",{className:"text-xs font-semibold px-2 py-1 rounded bg-white/50 dark:bg-black/20",children:"JAWABAN BENAR"}),(m.media_url||m.media_path)&&t.jsx("div",{className:"mt-2 rounded-lg overflow-hidden border border-border w-20 h-20 bg-white/50",children:t.jsx("img",{src:m.media_url||m.media_path||"",alt:b,className:"max-h-[100px] max-w-full object-contain"})})]},m.id)},e[5]=a,e[6]=x):x=e[6];const h=x;n="flex gap-4 w-full";let g;e[7]===Symbol.for("react.memo_cache_sentinel")?(g=t.jsx(ae,{className:"w-6 h-6"}),e[7]=g):g=e[7],d=h(s,"BENAR","emerald",g);let k;e[8]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx(ne,{className:"w-6 h-6"}),e[8]=k):k=e[8],c=h(u,"SALAH","red",k),e[0]=r,e[1]=a,e[2]=n,e[3]=d,e[4]=c}else n=e[2],d=e[3],c=e[4];let o;return e[9]!==n||e[10]!==d||e[11]!==c?(o=t.jsxs("div",{className:n,children:[d,c]}),e[9]=n,e[10]=d,e[11]=c,e[12]=o):o=e[12],o}function Dt(i){return i.option_key==="F"}function It(i){return i.option_key==="T"}function Ut(i){const e=F.c(39),{options:r,showKeyAnswer:l}=i,a=r.length>0?r[0]:null;if(!a)return null;const n=a.content||"",d=a.metadata?.delimiter||" ";let c,o,s,u,x,h,g,k,m;if(e[0]!==d||e[1]!==n){const w=n.split(d).filter(Bt);c="space-y-4",m="p-4 rounded-lg bg-emerald-50 border border-emerald-100 dark:bg-emerald-900/20 dark:border-emerald-800",g="flex items-start gap-3",e[11]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx("div",{className:"mt-0.5 p-1 rounded-full bg-emerald-100 text-emerald-600 dark:bg-emerald-800 dark:text-emerald-400",children:t.jsx(ae,{className:"w-4 h-4"})}),e[11]=k):k=e[11],x="space-y-3 w-full";let N;e[12]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx("span",{className:"text-sm font-semibold text-emerald-800 dark:text-emerald-300 block mb-1",children:"Kalimat Benar (Kunci Jawaban):"}),e[12]=N):N=e[12];let y;e[13]!==d?(y=t.jsxs("span",{className:"text-muted-foreground text-sm font-normal",children:['(Delimiter: "',d,'")']}),e[13]=d,e[14]=y):y=e[14],e[15]!==n||e[16]!==y?(h=t.jsxs("div",{children:[N,t.jsxs("p",{className:"text-base font-medium text-emerald-900 dark:text-emerald-100",children:[n," ",y]})]}),e[15]=n,e[16]=y,e[17]=h):h=e[17],e[18]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx("span",{className:"text-xs font-semibold text-emerald-700 dark:text-emerald-400 block mb-2",children:"Token (Urutan Benar):"}),e[18]=u):u=e[18],o="flex flex-wrap gap-2",s=w.map(Wt),e[0]=d,e[1]=n,e[2]=c,e[3]=o,e[4]=s,e[5]=u,e[6]=x,e[7]=h,e[8]=g,e[9]=k,e[10]=m}else c=e[2],o=e[3],s=e[4],u=e[5],x=e[6],h=e[7],g=e[8],k=e[9],m=e[10];let b;e[19]!==o||e[20]!==s?(b=t.jsx("div",{className:o,children:s}),e[19]=o,e[20]=s,e[21]=b):b=e[21];let v;e[22]!==b||e[23]!==u?(v=t.jsxs("div",{children:[u,b]}),e[22]=b,e[23]=u,e[24]=v):v=e[24];let _;e[25]!==v||e[26]!==x||e[27]!==h?(_=t.jsxs("div",{className:x,children:[h,v]}),e[25]=v,e[26]=x,e[27]=h,e[28]=_):_=e[28];let f;e[29]!==_||e[30]!==g||e[31]!==k?(f=t.jsxs("div",{className:g,children:[k,_]}),e[29]=_,e[30]=g,e[31]=k,e[32]=f):f=e[32];let j;e[33]!==f||e[34]!==m?(j=t.jsx("div",{className:m,children:f}),e[33]=f,e[34]=m,e[35]=j):j=e[35];let R;return e[36]!==c||e[37]!==j?(R=t.jsx("div",{className:c,children:j}),e[36]=c,e[37]=j,e[38]=R):R=e[38],R}function Wt(i,e){return t.jsxs(K,{variant:"outline",className:"bg-white border-emerald-200 text-emerald-700 hover:bg-emerald-50 dark:bg-black/20 dark:border-emerald-700 dark:text-emerald-300",children:[t.jsxs("span",{className:"opacity-50 mr-1.5 text-xs text-emerald-500",children:["#",e+1]}),i]},e)}function Bt(i){return i.length>0}function Lt(i){const e=F.c(29),{question:r,showKeyAnswer:l}=i,a=l===void 0?!0:l,{question_type:n,options:d}=r;let c;e[0]!==d?(c=d===void 0?[]:d,e[0]=d,e[1]=c):c=e[1];const o=c;if((!o||o.length===0)&&n!=="numerical_input"&&n!=="essay"){let s;return e[2]===Symbol.for("react.memo_cache_sentinel")?(s=t.jsx("div",{className:"text-sm text-muted-foreground italic p-4 text-center border border-dashed rounded-lg",children:"Belum ada opsi jawaban."}),e[2]=s):s=e[2],s}switch(n){case"multiple_choice":{let s;return e[3]!==o||e[4]!==a?(s=t.jsx(At,{options:o,showKeyAnswer:a}),e[3]=o,e[4]=a,e[5]=s):s=e[5],s}case"multiple_selection":{let s;return e[6]!==o||e[7]!==a?(s=t.jsx(St,{options:o,showKeyAnswer:a}),e[6]=o,e[7]=a,e[8]=s):s=e[8],s}case"true_false":{let s;return e[9]!==o||e[10]!==a?(s=t.jsx(Ft,{options:o,showKeyAnswer:a}),e[9]=o,e[10]=a,e[11]=s):s=e[11],s}case"matching":{let s;return e[12]!==o||e[13]!==a?(s=t.jsx(Rt,{options:o,showKeyAnswer:a}),e[12]=o,e[13]=a,e[14]=s):s=e[14],s}case"ordering":{let s;return e[15]!==o||e[16]!==a?(s=t.jsx($t,{options:o,showKeyAnswer:a}),e[15]=o,e[16]=a,e[17]=s):s=e[17],s}case"numerical_input":{let s;return e[18]!==o||e[19]!==a?(s=t.jsx(Et,{options:o,showKeyAnswer:a}),e[18]=o,e[19]=a,e[20]=s):s=e[20],s}case"essay":{let s;return e[21]!==o||e[22]!==a?(s=t.jsx(yt,{options:o,showKeyAnswer:a}),e[21]=o,e[22]=a,e[23]=s):s=e[23],s}case"arrange_words":{let s;return e[24]!==o||e[25]!==a?(s=t.jsx(Ut,{options:o,showKeyAnswer:a}),e[24]=o,e[25]=a,e[26]=s):s=e[26],s}default:{let s;return e[27]!==n?(s=t.jsxs("div",{className:"text-red-500 text-sm",children:["Tipe soal tidak didukung: ",n]}),e[27]=n,e[28]=s):s=e[28],s}}}const zt={multiple_choice:"Pilihan Ganda",multiple_selection:"Pilihan Kompleks",true_false:"Benar/Salah",matching:"Menjodohkan",ordering:"Mengurutkan",numerical_input:"Input Angka",essay:"Esai/Uraian"};function hr(i){const e=F.c(65),{question:r,onUpdate:l,onEdit:a,onDelete:n,readOnly:d}=i,c=d===void 0?!1:d;let o;e[0]!==l||e[1]!==r.id||e[2]!==c?(o=(A,I)=>{l&&!c&&l(r.id,A,I)},e[0]=l,e[1]=r.id,e[2]=c,e[3]=o):o=e[3];const s=o,u=zt[r.question_type]??r.question_type;let x;e[4]!==u?(x=t.jsx(K,{variant:"outline",className:"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 border-slate-200 dark:border-slate-700",children:u}),e[4]=u,e[5]=x):x=e[5];let h;e[6]!==s?(h=A=>s("difficulty_level",A),e[6]=s,e[7]=h):h=e[7];let g;e[8]!==r.difficulty_level||e[9]!==c||e[10]!==h?(g=t.jsx(Pe,{value:r.difficulty_level,onValueChange:h,disabled:c}),e[8]=r.difficulty_level,e[9]=c,e[10]=h,e[11]=g):g=e[11];let k;e[12]!==s?(k=A=>s("timer",A),e[12]=s,e[13]=k):k=e[13];let m;e[14]!==r.timer||e[15]!==c||e[16]!==k?(m=t.jsx(Oe,{value:r.timer,onValueChange:k,disabled:c}),e[14]=r.timer,e[15]=c,e[16]=k,e[17]=m):m=e[17];let b;e[18]!==s?(b=A=>s("score_value",A),e[18]=s,e[19]=b):b=e[19];let v;e[20]!==r.score_value||e[21]!==c||e[22]!==b?(v=t.jsx(Re,{value:r.score_value,onValueChange:b,disabled:c}),e[20]=r.score_value,e[21]=c,e[22]=b,e[23]=v):v=e[23];let _;e[24]!==n||e[25]!==a||e[26]!==r||e[27]!==c?(_=!c&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(G,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20",onClick:()=>a&&a(r),children:t.jsx(tt,{className:"w-4 h-4"})}),t.jsx(G,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",onClick:()=>{n&&window.confirm("Apakah anda yakin ingin menghapus pertanyaan ini?")&&n(r.id)},children:t.jsx(rt,{className:"w-4 h-4"})})]}),e[24]=n,e[25]=a,e[26]=r,e[27]=c,e[28]=_):_=e[28];let f;e[29]!==v||e[30]!==_||e[31]!==x||e[32]!==g||e[33]!==m?(f=t.jsx(Ne,{className:"p-3 bg-slate-50/50 dark:bg-slate-900/50 border-b border-slate-100 dark:border-slate-800",children:t.jsx("div",{className:"flex flex-col gap-3",children:t.jsxs("div",{className:"flex items-center justify-between",children:[x,g,m,v,_]})})}),e[29]=v,e[30]=_,e[31]=x,e[32]=g,e[33]=m,e[34]=f):f=e[34];let j;e[35]!==r.media_url?(j=r.media_url&&t.jsx("div",{className:"mb-4",children:t.jsx("img",{src:r.media_url,alt:"Question Media",className:"max-h-[100px] max-w-full rounded-md object-contain border bg-slate-50 dark:bg-slate-900"})}),e[35]=r.media_url,e[36]=j):j=e[36];const R=typeof r.content=="string"?r.content:"";let w;e[37]!==R?(w=t.jsx(B,{value:R,readOnly:!0,className:"bg-transparent border-none p-0"}),e[37]=R,e[38]=w):w=e[38];let N;e[39]!==j||e[40]!==w?(N=t.jsx(we,{className:"p-6",children:t.jsxs("div",{className:"prose prose-sm max-w-none dark:prose-invert",children:[j,w]})}),e[39]=j,e[40]=w,e[41]=N):N=e[41];let y;e[42]!==r?(y=t.jsx("div",{className:"w-full",children:t.jsx(Lt,{question:r,showKeyAnswer:!0})}),e[42]=r,e[43]=y):y=e[43];let S;e[44]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(at,{className:"w-4 h-4 text-muted-foreground"}),t.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Tags"})]}),e[44]=S):S=e[44];let E;e[45]!==s||e[46]!==r.tags||e[47]!==c?(E=r.tags?.map((A,I)=>{const be=typeof A.name=="object"?A.name.en||A.name.id||Object.values(A.name)[0]:A.name;return t.jsxs(K,{variant:"secondary",className:"gap-1 pr-1",children:[be,!c&&t.jsx("button",{onClick:()=>{const ve=(r.tags?.map(Ht)||[]).filter((qt,je)=>je!==I);s("tags",ve)},className:"hover:bg-red-100 hover:text-red-600 rounded-full p-0.5 transition-colors",children:t.jsx(ne,{className:"w-3 h-3"})})]},I)}),e[45]=s,e[46]=r.tags,e[47]=c,e[48]=E):E=e[48];let T;e[49]!==E?(T=t.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:E}),e[49]=E,e[50]=T):T=e[50];let C;e[51]!==s||e[52]!==r.tags||e[53]!==c?(C=!c&&t.jsx("div",{className:"flex w-full max-w-xs items-center space-x-2",children:t.jsx(kt,{onSelect:A=>{if(A){const I=r.tags?.map(Vt)||[];I.includes(A)||s("tags",[...I,A])}}})}),e[51]=s,e[52]=r.tags,e[53]=c,e[54]=C):C=e[54];let P;e[55]!==T||e[56]!==C?(P=t.jsxs("div",{className:"w-full pt-4 border-t border-slate-200 dark:border-slate-800",children:[S,T,C]}),e[55]=T,e[56]=C,e[57]=P):P=e[57];let O;e[58]!==y||e[59]!==P?(O=t.jsxs(ke,{className:"p-3 bg-slate-50/20 dark:bg-slate-900/20 border-t border-slate-100 dark:border-slate-800 flex-col items-start gap-4",children:[y,P]}),e[58]=y,e[59]=P,e[60]=O):O=e[60];let $;return e[61]!==f||e[62]!==N||e[63]!==O?($=t.jsxs(ye,{className:"overflow-hidden border-slate-200 dark:border-slate-800 shadow-sm rounded-2xl transition-all hover:shadow-md",children:[f,N,O]}),e[61]=f,e[62]=N,e[63]=O,e[64]=$):$=e[64],$}function Vt(i){return typeof i.name=="object"?i.name.en||i.name.id||Object.values(i.name)[0]:i.name}function Ht(i){return typeof i.name=="object"?i.name.en||i.name.id||Object.values(i.name)[0]:i.name}export{hr as Q};
